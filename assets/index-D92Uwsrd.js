const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/esp32-BPYaDt9v.js","assets/rom-Caghk6Eh.js","assets/esp32c2-CVPL8n1g.js","assets/esp32c3-I3vXmsVg.js","assets/esp32c6-C93uIFil.js","assets/esp32c61-Qo5S0GG2.js","assets/esp32c5-CAGCiNY4.js","assets/esp32h2-Cf8JbGZQ.js","assets/esp32s3-mu2zzjDN.js","assets/esp32s2-3nCAg6Ct.js","assets/esp8266-8VKmCx7J.js","assets/esp32p4-DfBdIAkh.js"])))=>i.map(i=>d[i]);
(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=e(a);fetch(a.href,r)}})();const Ha=!1;var Za=Array.isArray,$a=Array.from,Ga=Object.defineProperty,ki=Object.getOwnPropertyDescriptor,On=Object.getOwnPropertyDescriptors,Qe=Object.getPrototypeOf;function Wa(t){return t()}function ti(t){for(var i=0;i<t.length;i++)t[i]()}const ot=2,Mn=4,oe=8,pi=16,Q=32,De=64,At=128,Ae=256,z=512,pt=1024,le=2048,Ct=4096,fe=8192,Ka=16384,wi=32768,qa=1<<18,Pn=1<<19,Ri=Symbol("$state");function Ln(t){return t===this.v}function Va(t,i){return t!=t?i==i:t!==i||t!==null&&typeof t=="object"||typeof t=="function"}function ja(t){return!Va(t,this.v)}function Ya(t){throw new Error("effect_in_teardown")}function Xa(){throw new Error("effect_in_unowned_derived")}function Ja(t){throw new Error("effect_orphan")}function Qa(){throw new Error("effect_update_depth_exceeded")}function tr(){throw new Error("state_unsafe_local_read")}function er(){throw new Error("state_unsafe_mutation")}function Cn(t){return{f:0,v:t,reactions:null,equals:Ln,version:0}}function ir(t,i=!1){var n;const e=Cn(t);return i||(e.equals=ja),P!==null&&P.l!==null&&((n=P.l).s??(n.s=[])).push(e),e}function we(t,i=!1){return nr(ir(t,i))}function nr(t){return D!==null&&D.f&ot&&(Y===null?br([t]):Y.push(t)),t}function it(t,i){return D!==null&&yi()&&D.f&(ot|pi)&&(Y===null||!Y.includes(t))&&er(),ar(t,i)}function ar(t,i){return t.equals(i)||(t.v=i,t.version=ta(),Bn(t,pt),yi()&&I!==null&&I.f&z&&!(I.f&Q)&&(B!==null&&B.includes(t)?(tt(I,pt),Me(I)):_t===null?yr([t]):_t.push(t))),i}function Bn(t,i){var e=t.reactions;if(e!==null)for(var n=yi(),a=e.length,r=0;r<a;r++){var s=e[r],o=s.f;o&pt||!n&&s===I||(tt(s,i),o&(z|At)&&(o&ot?Bn(s,le):Me(s)))}}const rr=2;var Ii,Fn,Un;function sr(){if(Ii===void 0){Ii=window;var t=Element.prototype,i=Node.prototype;Fn=ki(i,"firstChild").get,Un=ki(i,"nextSibling").get,t.__click=void 0,t.__className="",t.__attributes=null,t.__styles=null,t.__e=void 0,Text.prototype.__t=void 0}}function or(t=""){return document.createTextNode(t)}function Nn(t){return Fn.call(t)}function zn(t){return Un.call(t)}function V(t,i){return Nn(t)}function lt(t,i=1,e=!1){let n=t;for(;i--;)n=zn(n);return n}function lr(t){var i=ot|pt;I===null?i|=At:I.f|=Pn;const e={children:null,ctx:P,deps:null,equals:Ln,f:i,fn:t,reactions:null,v:null,version:0,parent:I};if(D!==null&&D.f&ot){var n=D;(n.children??(n.children=[])).push(e)}return e}function Hn(t){var i=t.children;if(i!==null){t.children=null;for(var e=0;e<i.length;e+=1){var n=i[e];n.f&ot?gi(n):Nt(n)}}}function Zn(t){var i,e=I;gt(t.parent);try{Hn(t),i=ea(t)}finally{gt(e)}return i}function $n(t){var i=Zn(t),e=(Mt||t.f&At)&&t.deps!==null?le:z;tt(t,e),t.equals(i)||(t.v=i,t.version=ta())}function gi(t){Hn(t),Jt(t,0),tt(t,fe),t.v=t.children=t.deps=t.ctx=t.reactions=null}function Gn(t){I===null&&D===null&&Ja(),D!==null&&D.f&At&&Xa(),bi&&Ya()}function fr(t,i){var e=i.last;e===null?i.last=i.first=t:(e.next=t,t.prev=e,i.last=t)}function Ut(t,i,e,n=!0){var a=(t&De)!==0,r=I,s={ctx:P,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:t|pt,first:null,fn:i,last:null,next:null,parent:a?null:r,prev:null,teardown:null,transitions:null,version:0};if(e){var o=Pt;try{Li(!0),Oe(s),s.f|=Ka}catch(f){throw Nt(s),f}finally{Li(o)}}else i!==null&&Me(s);var h=e&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&Pn)===0;if(!h&&!a&&n&&(r!==null&&fr(s,r),D!==null&&D.f&ot)){var l=D;(l.children??(l.children=[])).push(s)}return s}function hr(t){const i=Ut(oe,null,!1);return tt(i,z),i.teardown=t,i}function Di(t){Gn();var i=I!==null&&(I.f&Q)!==0&&P!==null&&!P.m;if(i){var e=P;(e.e??(e.e=[])).push({fn:t,effect:I,reaction:D})}else{var n=Wn(t);return n}}function _r(t){return Gn(),ur(t)}function cr(t){const i=Ut(De,t,!0);return()=>{Nt(i)}}function Wn(t){return Ut(Mn,t,!1)}function ur(t){return Ut(oe,t,!0)}function Oi(t){return Kn(t)}function Kn(t,i=0){return Ut(oe|pi|i,t,!0)}function ei(t,i=!0){return Ut(oe|Q,t,!0,i)}function qn(t){var i=t.teardown;if(i!==null){const e=bi,n=D;Ci(!0),wt(null);try{i.call(null)}finally{Ci(e),wt(n)}}}function Vn(t){var i=t.deriveds;if(i!==null){t.deriveds=null;for(var e=0;e<i.length;e+=1)gi(i[e])}}function jn(t,i=!1){var e=t.first;for(t.first=t.last=null;e!==null;){var n=e.next;Nt(e,i),e=n}}function dr(t){for(var i=t.first;i!==null;){var e=i.next;i.f&Q||Nt(i),i=e}}function Nt(t,i=!0){var e=!1;if((i||t.f&qa)&&t.nodes_start!==null){for(var n=t.nodes_start,a=t.nodes_end;n!==null;){var r=n===a?null:zn(n);n.remove(),n=r}e=!0}jn(t,i&&!e),Vn(t),Jt(t,0),tt(t,fe);var s=t.transitions;if(s!==null)for(const h of s)h.stop();qn(t);var o=t.parent;o!==null&&o.first!==null&&Yn(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.parent=t.fn=t.nodes_start=t.nodes_end=null}function Yn(t){var i=t.parent,e=t.prev,n=t.next;e!==null&&(e.next=n),n!==null&&(n.prev=e),i!==null&&(i.first===t&&(i.first=n),i.last===t&&(i.last=e))}function Mi(t,i){var e=[];Xn(t,e,!0),pr(e,()=>{Nt(t),i&&i()})}function pr(t,i){var e=t.length;if(e>0){var n=()=>--e||i();for(var a of t)a.out(n)}else i()}function Xn(t,i,e){if(!(t.f&Ct)){if(t.f^=Ct,t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&i.push(s);for(var n=t.first;n!==null;){var a=n.next,r=(n.f&wi)!==0||(n.f&Q)!==0;Xn(n,i,r?e:!1),n=a}}}function Pi(t){Jn(t,!0)}function Jn(t,i){if(t.f&Ct){he(t)&&Oe(t),t.f^=Ct;for(var e=t.first;e!==null;){var n=e.next,a=(e.f&wi)!==0||(e.f&Q)!==0;Jn(e,a?i:!1),e=n}if(t.transitions!==null)for(const r of t.transitions)(r.is_global||i)&&r.in()}}let ii=!1,ni=[];function wr(){ii=!1;const t=ni.slice();ni=[],ti(t)}function gr(t){ii||(ii=!0,queueMicrotask(wr)),ni.push(t)}let Te=!1,Pt=!1,bi=!1;function Li(t){Pt=t}function Ci(t){bi=t}let ai=[],Vt=0;let D=null;function wt(t){D=t}let I=null;function gt(t){I=t}let Y=null;function br(t){Y=t}let B=null,H=0,_t=null;function yr(t){_t=t}let Qn=0,Mt=!1,P=null;function ta(){return++Qn}function yi(){return P!==null&&P.l===null}function he(t){var s,o;var i=t.f;if(i&pt)return!0;if(i&le){var e=t.deps,n=(i&At)!==0;if(e!==null){var a;if(i&Ae){for(a=0;a<e.length;a++)((s=e[a]).reactions??(s.reactions=[])).push(t);t.f^=Ae}for(a=0;a<e.length;a++){var r=e[a];if(he(r)&&$n(r),n&&I!==null&&!Mt&&!((o=r==null?void 0:r.reactions)!=null&&o.includes(t))&&(r.reactions??(r.reactions=[])).push(t),r.version>t.version)return!0}}n||tt(t,z)}return!1}function Er(t,i,e){throw t}function ea(t){var c;var i=B,e=H,n=_t,a=D,r=Mt,s=Y,o=P,h=t.f;B=null,H=0,_t=null,D=h&(Q|De)?null:t,Mt=!Pt&&(h&At)!==0,Y=null,P=t.ctx;try{var l=(0,t.fn)(),f=t.deps;if(B!==null){var d;if(Jt(t,H),f!==null&&H>0)for(f.length=H+B.length,d=0;d<B.length;d++)f[H+d]=B[d];else t.deps=f=B;if(!Mt)for(d=H;d<f.length;d++)((c=f[d]).reactions??(c.reactions=[])).push(t)}else f!==null&&H<f.length&&(Jt(t,H),f.length=H);return l}finally{B=i,H=e,_t=n,D=a,Mt=r,Y=s,P=o}}function vr(t,i){let e=i.reactions;if(e!==null){var n=e.indexOf(t);if(n!==-1){var a=e.length-1;a===0?e=i.reactions=null:(e[n]=e[a],e.pop())}}e===null&&i.f&ot&&(B===null||!B.includes(i))&&(tt(i,le),i.f&(At|Ae)||(i.f^=Ae),Jt(i,0))}function Jt(t,i){var e=t.deps;if(e!==null)for(var n=i;n<e.length;n++)vr(t,e[n])}function Oe(t){var i=t.f;if(!(i&fe)){tt(t,z);var e=I;I=t;try{i&pi?dr(t):jn(t),Vn(t),qn(t);var n=ea(t);t.teardown=typeof n=="function"?n:null,t.version=Qn}catch(a){Er(a)}finally{I=e}}}function Sr(){Vt>1e3&&(Vt=0,Qa()),Vt++}function mr(t){var i=t.length;if(i!==0){Sr();var e=Pt;Pt=!0;try{for(var n=0;n<i;n++){var a=t[n];a.f&z||(a.f^=z);var r=[];ia(a,r),xr(r)}}finally{Pt=e}}}function xr(t){var i=t.length;if(i!==0)for(var e=0;e<i;e++){var n=t[e];!(n.f&(fe|Ct))&&he(n)&&(Oe(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?Yn(n):n.fn=null))}}function Ar(){if(Te=!1,Vt>1001)return;const t=ai;ai=[],mr(t),Te||(Vt=0)}function Me(t){Te||(Te=!0,queueMicrotask(Ar));for(var i=t;i.parent!==null;){i=i.parent;var e=i.f;if(e&(De|Q)){if(!(e&z))return;i.f^=z}}ai.push(i)}function ia(t,i){var e=t.first,n=[];t:for(;e!==null;){var a=e.f,r=(a&Q)!==0,s=r&&(a&z)!==0;if(!s&&!(a&Ct))if(a&oe){r?e.f^=z:he(e)&&Oe(e);var o=e.first;if(o!==null){e=o;continue}}else a&Mn&&n.push(e);var h=e.next;if(h===null){let d=e.parent;for(;d!==null;){if(t===d)break t;var l=d.next;if(l!==null){e=l;continue t}d=d.parent}}e=h}for(var f=0;f<n.length;f++)o=n[f],i.push(o),ia(o,i)}function at(t){var o;var i=t.f,e=(i&ot)!==0;if(e&&i&fe){var n=Zn(t);return gi(t),n}if(D!==null){Y!==null&&Y.includes(t)&&tr();var a=D.deps;B===null&&a!==null&&a[H]===t?H++:B===null?B=[t]:B.push(t),_t!==null&&I!==null&&I.f&z&&!(I.f&Q)&&_t.includes(t)&&(tt(I,pt),Me(I))}else if(e&&t.deps===null){var r=t,s=r.parent;s!==null&&!((o=s.deriveds)!=null&&o.includes(r))&&(s.deriveds??(s.deriveds=[])).push(r)}return e&&(r=t,he(r)&&$n(r)),t.v}function Tr(t){const i=D;try{return D=null,t()}finally{D=i}}const kr=~(pt|le|z);function tt(t,i){t.f=t.f&kr|i}function na(t,i=!1,e){P={p:P,c:null,e:null,m:!1,s:t,x:null,l:null},i||(P.l={s:null,u:null,r1:[],r2:Cn(!1)})}function aa(t){const i=P;if(i!==null){const s=i.e;if(s!==null){var e=I,n=D;i.e=null;try{for(var a=0;a<s.length;a++){var r=s[a];gt(r.effect),wt(r.reaction),Wn(r.fn)}}finally{gt(e),wt(n)}}P=i.p,i.m=!0}return{}}function Rr(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Ri in t)ri(t);else if(!Array.isArray(t))for(let i in t){const e=t[i];typeof e=="object"&&e&&Ri in e&&ri(e)}}}function ri(t,i=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!i.has(t)){i.add(t),t instanceof Date&&t.getTime();for(let n in t)try{ri(t[n],i)}catch{}const e=Qe(t);if(e!==Object.prototype&&e!==Array.prototype&&e!==Map.prototype&&e!==Set.prototype&&e!==Date.prototype){const n=On(e);for(let a in n){const r=n[a].get;if(r)try{r.call(t)}catch{}}}}}const Ir=new Set,Bi=new Set;function Dr(t,i,e,n){function a(r){if(n.capture||Wt.call(i,r),!r.cancelBubble){var s=D,o=I;wt(null),gt(null);try{return e.call(this,r)}finally{wt(s),gt(o)}}}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?gr(()=>{i.addEventListener(t,a,n)}):i.addEventListener(t,a,n),a}function Fe(t,i,e,n,a){var r={capture:n,passive:a},s=Dr(t,i,e,r);(i===document.body||i===window||i===document)&&hr(()=>{i.removeEventListener(t,s,r)})}function Wt(t){var g;var i=this,e=i.ownerDocument,n=t.type,a=((g=t.composedPath)==null?void 0:g.call(t))||[],r=a[0]||t.target,s=0,o=t.__root;if(o){var h=a.indexOf(o);if(h!==-1&&(i===document||i===window)){t.__root=i;return}var l=a.indexOf(i);if(l===-1)return;h<=l&&(s=h)}if(r=a[s]||t.target,r!==i){Ga(t,"currentTarget",{configurable:!0,get(){return r||e}});var f=D,d=I;wt(null),gt(null);try{for(var c,_=[];r!==null;){var p=r.assignedSlot||r.parentNode||r.host||null;try{var m=r["__"+n];if(m!==void 0&&!r.disabled)if(Za(m)){var[y,...E]=m;y.apply(r,[t,...E])}else m.call(r,t)}catch(w){c?_.push(w):c=w}if(t.cancelBubble||p===i||p===null)break;r=p}if(c){for(let w of _)queueMicrotask(()=>{throw w});throw c}}finally{t.__root=i,delete t.currentTarget,wt(f),gt(d)}}}function Or(t){var i=document.createElement("template");return i.innerHTML=t,i.content}function Mr(t,i){var e=I;e.nodes_start===null&&(e.nodes_start=t,e.nodes_end=i)}function Tt(t,i){var e=(i&rr)!==0,n,a=!t.startsWith("<!>");return()=>{n===void 0&&(n=Or(a?t:"<!>"+t),n=Nn(n));var r=e?document.importNode(n,!0):n.cloneNode(!0);return Mr(r,r),r}}function bt(t,i){t!==null&&t.before(i)}const Pr=["touchstart","touchmove"];function Lr(t){return Pr.includes(t)}function Ue(t,i){var e=i==null?"":typeof i=="object"?i+"":i;e!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=e,t.nodeValue=e==null?"":e+"")}function Cr(t,i){return Br(t,i)}const It=new Map;function Br(t,{target:i,anchor:e,props:n={},events:a,context:r,intro:s=!0}){sr();var o=new Set,h=d=>{for(var c=0;c<d.length;c++){var _=d[c];if(!o.has(_)){o.add(_);var p=Lr(_);i.addEventListener(_,Wt,{passive:p});var m=It.get(_);m===void 0?(document.addEventListener(_,Wt,{passive:p}),It.set(_,1)):It.set(_,m+1)}}};h($a(Ir)),Bi.add(h);var l=void 0,f=cr(()=>{var d=e??i.appendChild(or());return ei(()=>{if(r){na({});var c=P;c.c=r}a&&(n.$$events=a),l=t(d,n)||{},r&&aa()}),()=>{var p;for(var c of o){i.removeEventListener(c,Wt);var _=It.get(c);--_===0?(document.removeEventListener(c,Wt),It.delete(c)):It.set(c,_)}Bi.delete(h),Fi.delete(l),d!==e&&((p=d.parentNode)==null||p.removeChild(d))}});return Fi.set(l,f),l}let Fi=new WeakMap;function ge(t,i,e,n=null,a=!1){var r=t,s=null,o=null,h=null,l=a?wi:0;Kn(()=>{h!==(h=!!i())&&(h?(s?Pi(s):s=ei(()=>e(r)),o&&Mi(o,()=>{o=null})):(o?Pi(o):n&&(o=ei(()=>n(r))),s&&Mi(s,()=>{s=null})))},l)}function Ui(t,i,e,n){var a=t.__attributes??(t.__attributes={});a[i]!==(a[i]=e)&&(e==null?t.removeAttribute(i):typeof e!="string"&&Fr(t).includes(i)?t[i]=e:t.setAttribute(i,e))}var Ni=new Map;function Fr(t){var i=Ni.get(t.nodeName);if(i)return i;Ni.set(t.nodeName,i=[]);for(var e,n=Qe(t),a=Element.prototype;a!==n;){e=On(n);for(var r in e)e[r].set&&i.push(r);n=Qe(n)}return i}function Ur(t=!1){const i=P,e=i.l.u;if(!e)return;let n=()=>Rr(i.s);if(t){let a=0,r={};const s=lr(()=>{let o=!1;const h=i.s;for(const l in h)h[l]!==r[l]&&(r[l]=h[l],o=!0);return o&&a++,a});n=()=>at(s)}e.b.length&&_r(()=>{zi(i,n),ti(e.b)}),Di(()=>{const a=Tr(()=>e.m.map(Wa));return()=>{for(const r of a)typeof r=="function"&&r()}}),e.a.length&&Di(()=>{zi(i,n),ti(e.a)})}function zi(t,i){if(t.l.s)for(const e of t.l.s)at(e);i()}const Nr="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Nr);const zr="/assets/mobot-DXNhfi0S.png",Hr="/assets/techmo-B_sNF-NQ.png",Zr="modulepreload",$r=function(t){return"/"+t},Hi={},K=function(i,e,n){let a=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));a=Promise.allSettled(e.map(h=>{if(h=$r(h),h in Hi)return;Hi[h]=!0;const l=h.endsWith(".css"),f=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":Zr,l||(d.as="script"),d.crossOrigin="",d.href=h,o&&d.setAttribute("nonce",o),document.head.appendChild(d),l)return new Promise((c,_)=>{d.addEventListener("load",c),d.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return a.then(s=>{for(const o of s||[])o.status==="rejected"&&r(o.reason);return i().catch(r)})};class F extends Error{}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Gr=4,Zi=0,$i=1,Wr=2;function zt(t){let i=t.length;for(;--i>=0;)t[i]=0}const Kr=0,ra=1,qr=2,Vr=3,jr=258,Ei=29,_e=256,Qt=_e+1+Ei,Lt=30,vi=19,sa=2*Qt+1,yt=15,Ne=16,Yr=7,Si=256,oa=16,la=17,fa=18,si=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),me=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Xr=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ha=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Jr=512,rt=new Array((Qt+2)*2);zt(rt);const jt=new Array(Lt*2);zt(jt);const te=new Array(Jr);zt(te);const ee=new Array(jr-Vr+1);zt(ee);const mi=new Array(Ei);zt(mi);const ke=new Array(Lt);zt(ke);function ze(t,i,e,n,a){this.static_tree=t,this.extra_bits=i,this.extra_base=e,this.elems=n,this.max_length=a,this.has_stree=t&&t.length}let _a,ca,ua;function He(t,i){this.dyn_tree=t,this.max_code=0,this.stat_desc=i}const da=t=>t<256?te[t]:te[256+(t>>>7)],ie=(t,i)=>{t.pending_buf[t.pending++]=i&255,t.pending_buf[t.pending++]=i>>>8&255},N=(t,i,e)=>{t.bi_valid>Ne-e?(t.bi_buf|=i<<t.bi_valid&65535,ie(t,t.bi_buf),t.bi_buf=i>>Ne-t.bi_valid,t.bi_valid+=e-Ne):(t.bi_buf|=i<<t.bi_valid&65535,t.bi_valid+=e)},j=(t,i,e)=>{N(t,e[i*2],e[i*2+1])},pa=(t,i)=>{let e=0;do e|=t&1,t>>>=1,e<<=1;while(--i>0);return e>>>1},Qr=t=>{t.bi_valid===16?(ie(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)},ts=(t,i)=>{const e=i.dyn_tree,n=i.max_code,a=i.stat_desc.static_tree,r=i.stat_desc.has_stree,s=i.stat_desc.extra_bits,o=i.stat_desc.extra_base,h=i.stat_desc.max_length;let l,f,d,c,_,p,m=0;for(c=0;c<=yt;c++)t.bl_count[c]=0;for(e[t.heap[t.heap_max]*2+1]=0,l=t.heap_max+1;l<sa;l++)f=t.heap[l],c=e[e[f*2+1]*2+1]+1,c>h&&(c=h,m++),e[f*2+1]=c,!(f>n)&&(t.bl_count[c]++,_=0,f>=o&&(_=s[f-o]),p=e[f*2],t.opt_len+=p*(c+_),r&&(t.static_len+=p*(a[f*2+1]+_)));if(m!==0){do{for(c=h-1;t.bl_count[c]===0;)c--;t.bl_count[c]--,t.bl_count[c+1]+=2,t.bl_count[h]--,m-=2}while(m>0);for(c=h;c!==0;c--)for(f=t.bl_count[c];f!==0;)d=t.heap[--l],!(d>n)&&(e[d*2+1]!==c&&(t.opt_len+=(c-e[d*2+1])*e[d*2],e[d*2+1]=c),f--)}},wa=(t,i,e)=>{const n=new Array(yt+1);let a=0,r,s;for(r=1;r<=yt;r++)a=a+e[r-1]<<1,n[r]=a;for(s=0;s<=i;s++){let o=t[s*2+1];o!==0&&(t[s*2]=pa(n[o]++,o))}},es=()=>{let t,i,e,n,a;const r=new Array(yt+1);for(e=0,n=0;n<Ei-1;n++)for(mi[n]=e,t=0;t<1<<si[n];t++)ee[e++]=n;for(ee[e-1]=n,a=0,n=0;n<16;n++)for(ke[n]=a,t=0;t<1<<me[n];t++)te[a++]=n;for(a>>=7;n<Lt;n++)for(ke[n]=a<<7,t=0;t<1<<me[n]-7;t++)te[256+a++]=n;for(i=0;i<=yt;i++)r[i]=0;for(t=0;t<=143;)rt[t*2+1]=8,t++,r[8]++;for(;t<=255;)rt[t*2+1]=9,t++,r[9]++;for(;t<=279;)rt[t*2+1]=7,t++,r[7]++;for(;t<=287;)rt[t*2+1]=8,t++,r[8]++;for(wa(rt,Qt+1,r),t=0;t<Lt;t++)jt[t*2+1]=5,jt[t*2]=pa(t,5);_a=new ze(rt,si,_e+1,Qt,yt),ca=new ze(jt,me,0,Lt,yt),ua=new ze(new Array(0),Xr,0,vi,Yr)},ga=t=>{let i;for(i=0;i<Qt;i++)t.dyn_ltree[i*2]=0;for(i=0;i<Lt;i++)t.dyn_dtree[i*2]=0;for(i=0;i<vi;i++)t.bl_tree[i*2]=0;t.dyn_ltree[Si*2]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},ba=t=>{t.bi_valid>8?ie(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},Gi=(t,i,e,n)=>{const a=i*2,r=e*2;return t[a]<t[r]||t[a]===t[r]&&n[i]<=n[e]},Ze=(t,i,e)=>{const n=t.heap[e];let a=e<<1;for(;a<=t.heap_len&&(a<t.heap_len&&Gi(i,t.heap[a+1],t.heap[a],t.depth)&&a++,!Gi(i,n,t.heap[a],t.depth));)t.heap[e]=t.heap[a],e=a,a<<=1;t.heap[e]=n},Wi=(t,i,e)=>{let n,a,r=0,s,o;if(t.sym_next!==0)do n=t.pending_buf[t.sym_buf+r++]&255,n+=(t.pending_buf[t.sym_buf+r++]&255)<<8,a=t.pending_buf[t.sym_buf+r++],n===0?j(t,a,i):(s=ee[a],j(t,s+_e+1,i),o=si[s],o!==0&&(a-=mi[s],N(t,a,o)),n--,s=da(n),j(t,s,e),o=me[s],o!==0&&(n-=ke[s],N(t,n,o)));while(r<t.sym_next);j(t,Si,i)},oi=(t,i)=>{const e=i.dyn_tree,n=i.stat_desc.static_tree,a=i.stat_desc.has_stree,r=i.stat_desc.elems;let s,o,h=-1,l;for(t.heap_len=0,t.heap_max=sa,s=0;s<r;s++)e[s*2]!==0?(t.heap[++t.heap_len]=h=s,t.depth[s]=0):e[s*2+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=h<2?++h:0,e[l*2]=1,t.depth[l]=0,t.opt_len--,a&&(t.static_len-=n[l*2+1]);for(i.max_code=h,s=t.heap_len>>1;s>=1;s--)Ze(t,e,s);l=r;do s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],Ze(t,e,1),o=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=o,e[l*2]=e[s*2]+e[o*2],t.depth[l]=(t.depth[s]>=t.depth[o]?t.depth[s]:t.depth[o])+1,e[s*2+1]=e[o*2+1]=l,t.heap[1]=l++,Ze(t,e,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],ts(t,i),wa(e,h,t.bl_count)},Ki=(t,i,e)=>{let n,a=-1,r,s=i[0*2+1],o=0,h=7,l=4;for(s===0&&(h=138,l=3),i[(e+1)*2+1]=65535,n=0;n<=e;n++)r=s,s=i[(n+1)*2+1],!(++o<h&&r===s)&&(o<l?t.bl_tree[r*2]+=o:r!==0?(r!==a&&t.bl_tree[r*2]++,t.bl_tree[oa*2]++):o<=10?t.bl_tree[la*2]++:t.bl_tree[fa*2]++,o=0,a=r,s===0?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4))},qi=(t,i,e)=>{let n,a=-1,r,s=i[0*2+1],o=0,h=7,l=4;for(s===0&&(h=138,l=3),n=0;n<=e;n++)if(r=s,s=i[(n+1)*2+1],!(++o<h&&r===s)){if(o<l)do j(t,r,t.bl_tree);while(--o!==0);else r!==0?(r!==a&&(j(t,r,t.bl_tree),o--),j(t,oa,t.bl_tree),N(t,o-3,2)):o<=10?(j(t,la,t.bl_tree),N(t,o-3,3)):(j(t,fa,t.bl_tree),N(t,o-11,7));o=0,a=r,s===0?(h=138,l=3):r===s?(h=6,l=3):(h=7,l=4)}},is=t=>{let i;for(Ki(t,t.dyn_ltree,t.l_desc.max_code),Ki(t,t.dyn_dtree,t.d_desc.max_code),oi(t,t.bl_desc),i=vi-1;i>=3&&t.bl_tree[ha[i]*2+1]===0;i--);return t.opt_len+=3*(i+1)+5+5+4,i},ns=(t,i,e,n)=>{let a;for(N(t,i-257,5),N(t,e-1,5),N(t,n-4,4),a=0;a<n;a++)N(t,t.bl_tree[ha[a]*2+1],3);qi(t,t.dyn_ltree,i-1),qi(t,t.dyn_dtree,e-1)},as=t=>{let i=4093624447,e;for(e=0;e<=31;e++,i>>>=1)if(i&1&&t.dyn_ltree[e*2]!==0)return Zi;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return $i;for(e=32;e<_e;e++)if(t.dyn_ltree[e*2]!==0)return $i;return Zi};let Vi=!1;const rs=t=>{Vi||(es(),Vi=!0),t.l_desc=new He(t.dyn_ltree,_a),t.d_desc=new He(t.dyn_dtree,ca),t.bl_desc=new He(t.bl_tree,ua),t.bi_buf=0,t.bi_valid=0,ga(t)},ya=(t,i,e,n)=>{N(t,(Kr<<1)+(n?1:0),3),ba(t),ie(t,e),ie(t,~e),e&&t.pending_buf.set(t.window.subarray(i,i+e),t.pending),t.pending+=e},ss=t=>{N(t,ra<<1,3),j(t,Si,rt),Qr(t)},os=(t,i,e,n)=>{let a,r,s=0;t.level>0?(t.strm.data_type===Wr&&(t.strm.data_type=as(t)),oi(t,t.l_desc),oi(t,t.d_desc),s=is(t),a=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=a&&(a=r)):a=r=e+5,e+4<=a&&i!==-1?ya(t,i,e,n):t.strategy===Gr||r===a?(N(t,(ra<<1)+(n?1:0),3),Wi(t,rt,jt)):(N(t,(qr<<1)+(n?1:0),3),ns(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),Wi(t,t.dyn_ltree,t.dyn_dtree)),ga(t),n&&ba(t)},ls=(t,i,e)=>(t.pending_buf[t.sym_buf+t.sym_next++]=i,t.pending_buf[t.sym_buf+t.sym_next++]=i>>8,t.pending_buf[t.sym_buf+t.sym_next++]=e,i===0?t.dyn_ltree[e*2]++:(t.matches++,i--,t.dyn_ltree[(ee[e]+_e+1)*2]++,t.dyn_dtree[da(i)*2]++),t.sym_next===t.sym_end);var fs=rs,hs=ya,_s=os,cs=ls,us=ss,ds={_tr_init:fs,_tr_stored_block:hs,_tr_flush_block:_s,_tr_tally:cs,_tr_align:us};const ps=(t,i,e,n)=>{let a=t&65535|0,r=t>>>16&65535|0,s=0;for(;e!==0;){s=e>2e3?2e3:e,e-=s;do a=a+i[n++]|0,r=r+a|0;while(--s);a%=65521,r%=65521}return a|r<<16|0};var ne=ps;const ws=()=>{let t,i=[];for(var e=0;e<256;e++){t=e;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;i[e]=t}return i},gs=new Uint32Array(ws()),bs=(t,i,e,n)=>{const a=gs,r=n+e;t^=-1;for(let s=n;s<r;s++)t=t>>>8^a[(t^i[s])&255];return t^-1};var L=bs,St={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ht={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:ys,_tr_stored_block:li,_tr_flush_block:Es,_tr_tally:ct,_tr_align:vs}=ds,{Z_NO_FLUSH:ut,Z_PARTIAL_FLUSH:Ss,Z_FULL_FLUSH:ms,Z_FINISH:G,Z_BLOCK:ji,Z_OK:C,Z_STREAM_END:Yi,Z_STREAM_ERROR:X,Z_DATA_ERROR:xs,Z_BUF_ERROR:$e,Z_DEFAULT_COMPRESSION:As,Z_FILTERED:Ts,Z_HUFFMAN_ONLY:be,Z_RLE:ks,Z_FIXED:Rs,Z_DEFAULT_STRATEGY:Is,Z_UNKNOWN:Ds,Z_DEFLATED:Pe}=Ht,Os=9,Ms=15,Ps=8,Ls=29,Cs=256,fi=Cs+1+Ls,Bs=30,Fs=19,Us=2*fi+1,Ns=15,k=3,ht=258,J=ht+k+1,zs=32,Bt=42,xi=57,hi=69,_i=73,ci=91,ui=103,Et=113,Kt=666,U=1,Zt=2,mt=3,$t=4,Hs=3,vt=(t,i)=>(t.msg=St[i],i),Xi=t=>t*2-(t>4?9:0),ft=t=>{let i=t.length;for(;--i>=0;)t[i]=0},Zs=t=>{let i,e,n,a=t.w_size;i=t.hash_size,n=i;do e=t.head[--n],t.head[n]=e>=a?e-a:0;while(--i);i=a,n=i;do e=t.prev[--n],t.prev[n]=e>=a?e-a:0;while(--i)};let $s=(t,i,e)=>(i<<t.hash_shift^e)&t.hash_mask,dt=$s;const Z=t=>{const i=t.state;let e=i.pending;e>t.avail_out&&(e=t.avail_out),e!==0&&(t.output.set(i.pending_buf.subarray(i.pending_out,i.pending_out+e),t.next_out),t.next_out+=e,i.pending_out+=e,t.total_out+=e,t.avail_out-=e,i.pending-=e,i.pending===0&&(i.pending_out=0))},$=(t,i)=>{Es(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,i),t.block_start=t.strstart,Z(t.strm)},R=(t,i)=>{t.pending_buf[t.pending++]=i},Gt=(t,i)=>{t.pending_buf[t.pending++]=i>>>8&255,t.pending_buf[t.pending++]=i&255},di=(t,i,e,n)=>{let a=t.avail_in;return a>n&&(a=n),a===0?0:(t.avail_in-=a,i.set(t.input.subarray(t.next_in,t.next_in+a),e),t.state.wrap===1?t.adler=ne(t.adler,i,a,e):t.state.wrap===2&&(t.adler=L(t.adler,i,a,e)),t.next_in+=a,t.total_in+=a,a)},Ea=(t,i)=>{let e=t.max_chain_length,n=t.strstart,a,r,s=t.prev_length,o=t.nice_match;const h=t.strstart>t.w_size-J?t.strstart-(t.w_size-J):0,l=t.window,f=t.w_mask,d=t.prev,c=t.strstart+ht;let _=l[n+s-1],p=l[n+s];t.prev_length>=t.good_match&&(e>>=2),o>t.lookahead&&(o=t.lookahead);do if(a=i,!(l[a+s]!==p||l[a+s-1]!==_||l[a]!==l[n]||l[++a]!==l[n+1])){n+=2,a++;do;while(l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&n<c);if(r=ht-(c-n),n=c-ht,r>s){if(t.match_start=i,s=r,r>=o)break;_=l[n+s-1],p=l[n+s]}}while((i=d[i&f])>h&&--e!==0);return s<=t.lookahead?s:t.lookahead},Ft=t=>{const i=t.w_size;let e,n,a;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=i+(i-J)&&(t.window.set(t.window.subarray(i,i+i-n),0),t.match_start-=i,t.strstart-=i,t.block_start-=i,t.insert>t.strstart&&(t.insert=t.strstart),Zs(t),n+=i),t.strm.avail_in===0)break;if(e=di(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=e,t.lookahead+t.insert>=k)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=dt(t,t.ins_h,t.window[a+1]);t.insert&&(t.ins_h=dt(t,t.ins_h,t.window[a+k-1]),t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<k)););}while(t.lookahead<J&&t.strm.avail_in!==0)},va=(t,i)=>{let e=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,n,a,r,s=0,o=t.strm.avail_in;do{if(n=65535,r=t.bi_valid+42>>3,t.strm.avail_out<r||(r=t.strm.avail_out-r,a=t.strstart-t.block_start,n>a+t.strm.avail_in&&(n=a+t.strm.avail_in),n>r&&(n=r),n<e&&(n===0&&i!==G||i===ut||n!==a+t.strm.avail_in)))break;s=i===G&&n===a+t.strm.avail_in?1:0,li(t,0,0,s),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,Z(t.strm),a&&(a>n&&(a=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+a),t.strm.next_out),t.strm.next_out+=a,t.strm.avail_out-=a,t.strm.total_out+=a,t.block_start+=a,n-=a),n&&(di(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(s===0);return o-=t.strm.avail_in,o&&(o>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=o&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-o,t.strm.next_in),t.strstart),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),s?$t:i!==ut&&i!==G&&t.strm.avail_in===0&&t.strstart===t.block_start?Zt:(r=t.window_size-t.strstart,t.strm.avail_in>r&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,r+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),r>t.strm.avail_in&&(r=t.strm.avail_in),r&&(di(t.strm,t.window,t.strstart,r),t.strstart+=r,t.insert+=r>t.w_size-t.insert?t.w_size-t.insert:r),t.high_water<t.strstart&&(t.high_water=t.strstart),r=t.bi_valid+42>>3,r=t.pending_buf_size-r>65535?65535:t.pending_buf_size-r,e=r>t.w_size?t.w_size:r,a=t.strstart-t.block_start,(a>=e||(a||i===G)&&i!==ut&&t.strm.avail_in===0&&a<=r)&&(n=a>r?r:a,s=i===G&&t.strm.avail_in===0&&n===a?1:0,li(t,t.block_start,n,s),t.block_start+=n,Z(t.strm)),s?mt:U)},Ge=(t,i)=>{let e,n;for(;;){if(t.lookahead<J){if(Ft(t),t.lookahead<J&&i===ut)return U;if(t.lookahead===0)break}if(e=0,t.lookahead>=k&&(t.ins_h=dt(t,t.ins_h,t.window[t.strstart+k-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),e!==0&&t.strstart-e<=t.w_size-J&&(t.match_length=Ea(t,e)),t.match_length>=k)if(n=ct(t,t.strstart-t.match_start,t.match_length-k),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=k){t.match_length--;do t.strstart++,t.ins_h=dt(t,t.ins_h,t.window[t.strstart+k-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=dt(t,t.ins_h,t.window[t.strstart+1]);else n=ct(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&($(t,!1),t.strm.avail_out===0))return U}return t.insert=t.strstart<k-1?t.strstart:k-1,i===G?($(t,!0),t.strm.avail_out===0?mt:$t):t.sym_next&&($(t,!1),t.strm.avail_out===0)?U:Zt},Dt=(t,i)=>{let e,n,a;for(;;){if(t.lookahead<J){if(Ft(t),t.lookahead<J&&i===ut)return U;if(t.lookahead===0)break}if(e=0,t.lookahead>=k&&(t.ins_h=dt(t,t.ins_h,t.window[t.strstart+k-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=k-1,e!==0&&t.prev_length<t.max_lazy_match&&t.strstart-e<=t.w_size-J&&(t.match_length=Ea(t,e),t.match_length<=5&&(t.strategy===Ts||t.match_length===k&&t.strstart-t.match_start>4096)&&(t.match_length=k-1)),t.prev_length>=k&&t.match_length<=t.prev_length){a=t.strstart+t.lookahead-k,n=ct(t,t.strstart-1-t.prev_match,t.prev_length-k),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=a&&(t.ins_h=dt(t,t.ins_h,t.window[t.strstart+k-1]),e=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=k-1,t.strstart++,n&&($(t,!1),t.strm.avail_out===0))return U}else if(t.match_available){if(n=ct(t,0,t.window[t.strstart-1]),n&&$(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return U}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=ct(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<k-1?t.strstart:k-1,i===G?($(t,!0),t.strm.avail_out===0?mt:$t):t.sym_next&&($(t,!1),t.strm.avail_out===0)?U:Zt},Gs=(t,i)=>{let e,n,a,r;const s=t.window;for(;;){if(t.lookahead<=ht){if(Ft(t),t.lookahead<=ht&&i===ut)return U;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=k&&t.strstart>0&&(a=t.strstart-1,n=s[a],n===s[++a]&&n===s[++a]&&n===s[++a])){r=t.strstart+ht;do;while(n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&a<r);t.match_length=ht-(r-a),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=k?(e=ct(t,1,t.match_length-k),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(e=ct(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),e&&($(t,!1),t.strm.avail_out===0))return U}return t.insert=0,i===G?($(t,!0),t.strm.avail_out===0?mt:$t):t.sym_next&&($(t,!1),t.strm.avail_out===0)?U:Zt},Ws=(t,i)=>{let e;for(;;){if(t.lookahead===0&&(Ft(t),t.lookahead===0)){if(i===ut)return U;break}if(t.match_length=0,e=ct(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,e&&($(t,!1),t.strm.avail_out===0))return U}return t.insert=0,i===G?($(t,!0),t.strm.avail_out===0?mt:$t):t.sym_next&&($(t,!1),t.strm.avail_out===0)?U:Zt};function q(t,i,e,n,a){this.good_length=t,this.max_lazy=i,this.nice_length=e,this.max_chain=n,this.func=a}const qt=[new q(0,0,0,0,va),new q(4,4,8,4,Ge),new q(4,5,16,8,Ge),new q(4,6,32,32,Ge),new q(4,4,16,16,Dt),new q(8,16,32,32,Dt),new q(8,16,128,128,Dt),new q(8,32,128,256,Dt),new q(32,128,258,1024,Dt),new q(32,258,258,4096,Dt)],Ks=t=>{t.window_size=2*t.w_size,ft(t.head),t.max_lazy_match=qt[t.level].max_lazy,t.good_match=qt[t.level].good_length,t.nice_match=qt[t.level].nice_length,t.max_chain_length=qt[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=k-1,t.match_available=0,t.ins_h=0};function qs(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Pe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Us*2),this.dyn_dtree=new Uint16Array((2*Bs+1)*2),this.bl_tree=new Uint16Array((2*Fs+1)*2),ft(this.dyn_ltree),ft(this.dyn_dtree),ft(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ns+1),this.heap=new Uint16Array(2*fi+1),ft(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*fi+1),ft(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const ce=t=>{if(!t)return 1;const i=t.state;return!i||i.strm!==t||i.status!==Bt&&i.status!==xi&&i.status!==hi&&i.status!==_i&&i.status!==ci&&i.status!==ui&&i.status!==Et&&i.status!==Kt?1:0},Sa=t=>{if(ce(t))return vt(t,X);t.total_in=t.total_out=0,t.data_type=Ds;const i=t.state;return i.pending=0,i.pending_out=0,i.wrap<0&&(i.wrap=-i.wrap),i.status=i.wrap===2?xi:i.wrap?Bt:Et,t.adler=i.wrap===2?0:1,i.last_flush=-2,ys(i),C},ma=t=>{const i=Sa(t);return i===C&&Ks(t.state),i},Vs=(t,i)=>ce(t)||t.state.wrap!==2?X:(t.state.gzhead=i,C),xa=(t,i,e,n,a,r)=>{if(!t)return X;let s=1;if(i===As&&(i=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),a<1||a>Os||e!==Pe||n<8||n>15||i<0||i>9||r<0||r>Rs||n===8&&s!==1)return vt(t,X);n===8&&(n=9);const o=new qs;return t.state=o,o.strm=t,o.status=Bt,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+k-1)/k),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=i,o.strategy=r,o.method=e,ma(t)},js=(t,i)=>xa(t,i,Pe,Ms,Ps,Is),Ys=(t,i)=>{if(ce(t)||i>ji||i<0)return t?vt(t,X):X;const e=t.state;if(!t.output||t.avail_in!==0&&!t.input||e.status===Kt&&i!==G)return vt(t,t.avail_out===0?$e:X);const n=e.last_flush;if(e.last_flush=i,e.pending!==0){if(Z(t),t.avail_out===0)return e.last_flush=-1,C}else if(t.avail_in===0&&Xi(i)<=Xi(n)&&i!==G)return vt(t,$e);if(e.status===Kt&&t.avail_in!==0)return vt(t,$e);if(e.status===Bt&&e.wrap===0&&(e.status=Et),e.status===Bt){let a=Pe+(e.w_bits-8<<4)<<8,r=-1;if(e.strategy>=be||e.level<2?r=0:e.level<6?r=1:e.level===6?r=2:r=3,a|=r<<6,e.strstart!==0&&(a|=zs),a+=31-a%31,Gt(e,a),e.strstart!==0&&(Gt(e,t.adler>>>16),Gt(e,t.adler&65535)),t.adler=1,e.status=Et,Z(t),e.pending!==0)return e.last_flush=-1,C}if(e.status===xi){if(t.adler=0,R(e,31),R(e,139),R(e,8),e.gzhead)R(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),R(e,e.gzhead.time&255),R(e,e.gzhead.time>>8&255),R(e,e.gzhead.time>>16&255),R(e,e.gzhead.time>>24&255),R(e,e.level===9?2:e.strategy>=be||e.level<2?4:0),R(e,e.gzhead.os&255),e.gzhead.extra&&e.gzhead.extra.length&&(R(e,e.gzhead.extra.length&255),R(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(t.adler=L(t.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=hi;else if(R(e,0),R(e,0),R(e,0),R(e,0),R(e,0),R(e,e.level===9?2:e.strategy>=be||e.level<2?4:0),R(e,Hs),e.status=Et,Z(t),e.pending!==0)return e.last_flush=-1,C}if(e.status===hi){if(e.gzhead.extra){let a=e.pending,r=(e.gzhead.extra.length&65535)-e.gzindex;for(;e.pending+r>e.pending_buf_size;){let o=e.pending_buf_size-e.pending;if(e.pending_buf.set(e.gzhead.extra.subarray(e.gzindex,e.gzindex+o),e.pending),e.pending=e.pending_buf_size,e.gzhead.hcrc&&e.pending>a&&(t.adler=L(t.adler,e.pending_buf,e.pending-a,a)),e.gzindex+=o,Z(t),e.pending!==0)return e.last_flush=-1,C;a=0,r-=o}let s=new Uint8Array(e.gzhead.extra);e.pending_buf.set(s.subarray(e.gzindex,e.gzindex+r),e.pending),e.pending+=r,e.gzhead.hcrc&&e.pending>a&&(t.adler=L(t.adler,e.pending_buf,e.pending-a,a)),e.gzindex=0}e.status=_i}if(e.status===_i){if(e.gzhead.name){let a=e.pending,r;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>a&&(t.adler=L(t.adler,e.pending_buf,e.pending-a,a)),Z(t),e.pending!==0)return e.last_flush=-1,C;a=0}e.gzindex<e.gzhead.name.length?r=e.gzhead.name.charCodeAt(e.gzindex++)&255:r=0,R(e,r)}while(r!==0);e.gzhead.hcrc&&e.pending>a&&(t.adler=L(t.adler,e.pending_buf,e.pending-a,a)),e.gzindex=0}e.status=ci}if(e.status===ci){if(e.gzhead.comment){let a=e.pending,r;do{if(e.pending===e.pending_buf_size){if(e.gzhead.hcrc&&e.pending>a&&(t.adler=L(t.adler,e.pending_buf,e.pending-a,a)),Z(t),e.pending!==0)return e.last_flush=-1,C;a=0}e.gzindex<e.gzhead.comment.length?r=e.gzhead.comment.charCodeAt(e.gzindex++)&255:r=0,R(e,r)}while(r!==0);e.gzhead.hcrc&&e.pending>a&&(t.adler=L(t.adler,e.pending_buf,e.pending-a,a))}e.status=ui}if(e.status===ui){if(e.gzhead.hcrc){if(e.pending+2>e.pending_buf_size&&(Z(t),e.pending!==0))return e.last_flush=-1,C;R(e,t.adler&255),R(e,t.adler>>8&255),t.adler=0}if(e.status=Et,Z(t),e.pending!==0)return e.last_flush=-1,C}if(t.avail_in!==0||e.lookahead!==0||i!==ut&&e.status!==Kt){let a=e.level===0?va(e,i):e.strategy===be?Ws(e,i):e.strategy===ks?Gs(e,i):qt[e.level].func(e,i);if((a===mt||a===$t)&&(e.status=Kt),a===U||a===mt)return t.avail_out===0&&(e.last_flush=-1),C;if(a===Zt&&(i===Ss?vs(e):i!==ji&&(li(e,0,0,!1),i===ms&&(ft(e.head),e.lookahead===0&&(e.strstart=0,e.block_start=0,e.insert=0))),Z(t),t.avail_out===0))return e.last_flush=-1,C}return i!==G?C:e.wrap<=0?Yi:(e.wrap===2?(R(e,t.adler&255),R(e,t.adler>>8&255),R(e,t.adler>>16&255),R(e,t.adler>>24&255),R(e,t.total_in&255),R(e,t.total_in>>8&255),R(e,t.total_in>>16&255),R(e,t.total_in>>24&255)):(Gt(e,t.adler>>>16),Gt(e,t.adler&65535)),Z(t),e.wrap>0&&(e.wrap=-e.wrap),e.pending!==0?C:Yi)},Xs=t=>{if(ce(t))return X;const i=t.state.status;return t.state=null,i===Et?vt(t,xs):C},Js=(t,i)=>{let e=i.length;if(ce(t))return X;const n=t.state,a=n.wrap;if(a===2||a===1&&n.status!==Bt||n.lookahead)return X;if(a===1&&(t.adler=ne(t.adler,i,e,0)),n.wrap=0,e>=n.w_size){a===0&&(ft(n.head),n.strstart=0,n.block_start=0,n.insert=0);let h=new Uint8Array(n.w_size);h.set(i.subarray(e-n.w_size,e),0),i=h,e=n.w_size}const r=t.avail_in,s=t.next_in,o=t.input;for(t.avail_in=e,t.next_in=0,t.input=i,Ft(n);n.lookahead>=k;){let h=n.strstart,l=n.lookahead-(k-1);do n.ins_h=dt(n,n.ins_h,n.window[h+k-1]),n.prev[h&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=h,h++;while(--l);n.strstart=h,n.lookahead=k-1,Ft(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=k-1,n.match_available=0,t.next_in=s,t.input=o,t.avail_in=r,n.wrap=a,C};var Qs=js,to=xa,eo=ma,io=Sa,no=Vs,ao=Ys,ro=Xs,so=Js,oo="pako deflate (from Nodeca project)",Yt={deflateInit:Qs,deflateInit2:to,deflateReset:eo,deflateResetKeep:io,deflateSetHeader:no,deflate:ao,deflateEnd:ro,deflateSetDictionary:so,deflateInfo:oo};const lo=(t,i)=>Object.prototype.hasOwnProperty.call(t,i);var fo=function(t){const i=Array.prototype.slice.call(arguments,1);for(;i.length;){const e=i.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const n in e)lo(e,n)&&(t[n]=e[n])}}return t},ho=t=>{let i=0;for(let n=0,a=t.length;n<a;n++)i+=t[n].length;const e=new Uint8Array(i);for(let n=0,a=0,r=t.length;n<r;n++){let s=t[n];e.set(s,a),a+=s.length}return e},Le={assign:fo,flattenChunks:ho};let Aa=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Aa=!1}const ae=new Uint8Array(256);for(let t=0;t<256;t++)ae[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;ae[254]=ae[254]=1;var _o=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let i,e,n,a,r,s=t.length,o=0;for(a=0;a<s;a++)e=t.charCodeAt(a),(e&64512)===55296&&a+1<s&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),a++)),o+=e<128?1:e<2048?2:e<65536?3:4;for(i=new Uint8Array(o),r=0,a=0;r<o;a++)e=t.charCodeAt(a),(e&64512)===55296&&a+1<s&&(n=t.charCodeAt(a+1),(n&64512)===56320&&(e=65536+(e-55296<<10)+(n-56320),a++)),e<128?i[r++]=e:e<2048?(i[r++]=192|e>>>6,i[r++]=128|e&63):e<65536?(i[r++]=224|e>>>12,i[r++]=128|e>>>6&63,i[r++]=128|e&63):(i[r++]=240|e>>>18,i[r++]=128|e>>>12&63,i[r++]=128|e>>>6&63,i[r++]=128|e&63);return i};const co=(t,i)=>{if(i<65534&&t.subarray&&Aa)return String.fromCharCode.apply(null,t.length===i?t:t.subarray(0,i));let e="";for(let n=0;n<i;n++)e+=String.fromCharCode(t[n]);return e};var uo=(t,i)=>{const e=i||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,i));let n,a;const r=new Array(e*2);for(a=0,n=0;n<e;){let s=t[n++];if(s<128){r[a++]=s;continue}let o=ae[s];if(o>4){r[a++]=65533,n+=o-1;continue}for(s&=o===2?31:o===3?15:7;o>1&&n<e;)s=s<<6|t[n++]&63,o--;if(o>1){r[a++]=65533;continue}s<65536?r[a++]=s:(s-=65536,r[a++]=55296|s>>10&1023,r[a++]=56320|s&1023)}return co(r,a)},po=(t,i)=>{i=i||t.length,i>t.length&&(i=t.length);let e=i-1;for(;e>=0&&(t[e]&192)===128;)e--;return e<0||e===0?i:e+ae[t[e]]>i?e:i},re={string2buf:_o,buf2string:uo,utf8border:po};function wo(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ta=wo;const ka=Object.prototype.toString,{Z_NO_FLUSH:go,Z_SYNC_FLUSH:bo,Z_FULL_FLUSH:yo,Z_FINISH:Eo,Z_OK:Re,Z_STREAM_END:vo,Z_DEFAULT_COMPRESSION:So,Z_DEFAULT_STRATEGY:mo,Z_DEFLATED:xo}=Ht;function ue(t){this.options=Le.assign({level:So,method:xo,chunkSize:16384,windowBits:15,memLevel:8,strategy:mo},t||{});let i=this.options;i.raw&&i.windowBits>0?i.windowBits=-i.windowBits:i.gzip&&i.windowBits>0&&i.windowBits<16&&(i.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ta,this.strm.avail_out=0;let e=Yt.deflateInit2(this.strm,i.level,i.method,i.windowBits,i.memLevel,i.strategy);if(e!==Re)throw new Error(St[e]);if(i.header&&Yt.deflateSetHeader(this.strm,i.header),i.dictionary){let n;if(typeof i.dictionary=="string"?n=re.string2buf(i.dictionary):ka.call(i.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(i.dictionary):n=i.dictionary,e=Yt.deflateSetDictionary(this.strm,n),e!==Re)throw new Error(St[e]);this._dict_set=!0}}ue.prototype.push=function(t,i){const e=this.strm,n=this.options.chunkSize;let a,r;if(this.ended)return!1;for(i===~~i?r=i:r=i===!0?Eo:go,typeof t=="string"?e.input=re.string2buf(t):ka.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;){if(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),(r===bo||r===yo)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(a=Yt.deflate(e,r),a===vo)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),a=Yt.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===Re;if(e.avail_out===0){this.onData(e.output);continue}if(r>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(e.avail_in===0)break}return!0};ue.prototype.onData=function(t){this.chunks.push(t)};ue.prototype.onEnd=function(t){t===Re&&(this.result=Le.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Ai(t,i){const e=new ue(i);if(e.push(t,!0),e.err)throw e.msg||St[e.err];return e.result}function Ao(t,i){return i=i||{},i.raw=!0,Ai(t,i)}function To(t,i){return i=i||{},i.gzip=!0,Ai(t,i)}var ko=ue,Ro=Ai,Io=Ao,Do=To,Oo=Ht,Mo={Deflate:ko,deflate:Ro,deflateRaw:Io,gzip:Do,constants:Oo};const ye=16209,Po=16191;var Lo=function(i,e){let n,a,r,s,o,h,l,f,d,c,_,p,m,y,E,g,w,u,S,M,b,T,x,v;const A=i.state;n=i.next_in,x=i.input,a=n+(i.avail_in-5),r=i.next_out,v=i.output,s=r-(e-i.avail_out),o=r+(i.avail_out-257),h=A.dmax,l=A.wsize,f=A.whave,d=A.wnext,c=A.window,_=A.hold,p=A.bits,m=A.lencode,y=A.distcode,E=(1<<A.lenbits)-1,g=(1<<A.distbits)-1;t:do{p<15&&(_+=x[n++]<<p,p+=8,_+=x[n++]<<p,p+=8),w=m[_&E];e:for(;;){if(u=w>>>24,_>>>=u,p-=u,u=w>>>16&255,u===0)v[r++]=w&65535;else if(u&16){S=w&65535,u&=15,u&&(p<u&&(_+=x[n++]<<p,p+=8),S+=_&(1<<u)-1,_>>>=u,p-=u),p<15&&(_+=x[n++]<<p,p+=8,_+=x[n++]<<p,p+=8),w=y[_&g];i:for(;;){if(u=w>>>24,_>>>=u,p-=u,u=w>>>16&255,u&16){if(M=w&65535,u&=15,p<u&&(_+=x[n++]<<p,p+=8,p<u&&(_+=x[n++]<<p,p+=8)),M+=_&(1<<u)-1,M>h){i.msg="invalid distance too far back",A.mode=ye;break t}if(_>>>=u,p-=u,u=r-s,M>u){if(u=M-u,u>f&&A.sane){i.msg="invalid distance too far back",A.mode=ye;break t}if(b=0,T=c,d===0){if(b+=l-u,u<S){S-=u;do v[r++]=c[b++];while(--u);b=r-M,T=v}}else if(d<u){if(b+=l+d-u,u-=d,u<S){S-=u;do v[r++]=c[b++];while(--u);if(b=0,d<S){u=d,S-=u;do v[r++]=c[b++];while(--u);b=r-M,T=v}}}else if(b+=d-u,u<S){S-=u;do v[r++]=c[b++];while(--u);b=r-M,T=v}for(;S>2;)v[r++]=T[b++],v[r++]=T[b++],v[r++]=T[b++],S-=3;S&&(v[r++]=T[b++],S>1&&(v[r++]=T[b++]))}else{b=r-M;do v[r++]=v[b++],v[r++]=v[b++],v[r++]=v[b++],S-=3;while(S>2);S&&(v[r++]=v[b++],S>1&&(v[r++]=v[b++]))}}else if(u&64){i.msg="invalid distance code",A.mode=ye;break t}else{w=y[(w&65535)+(_&(1<<u)-1)];continue i}break}}else if(u&64)if(u&32){A.mode=Po;break t}else{i.msg="invalid literal/length code",A.mode=ye;break t}else{w=m[(w&65535)+(_&(1<<u)-1)];continue e}break}}while(n<a&&r<o);S=p>>3,n-=S,p-=S<<3,_&=(1<<p)-1,i.next_in=n,i.next_out=r,i.avail_in=n<a?5+(a-n):5-(n-a),i.avail_out=r<o?257+(o-r):257-(r-o),A.hold=_,A.bits=p};const Ot=15,Ji=852,Qi=592,tn=0,We=1,en=2,Co=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Bo=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Fo=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Uo=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),No=(t,i,e,n,a,r,s,o)=>{const h=o.bits;let l=0,f=0,d=0,c=0,_=0,p=0,m=0,y=0,E=0,g=0,w,u,S,M,b,T=null,x;const v=new Uint16Array(Ot+1),A=new Uint16Array(Ot+1);let et=null,Be,Rt,pe;for(l=0;l<=Ot;l++)v[l]=0;for(f=0;f<n;f++)v[i[e+f]]++;for(_=h,c=Ot;c>=1&&v[c]===0;c--);if(_>c&&(_=c),c===0)return a[r++]=1<<24|64<<16|0,a[r++]=1<<24|64<<16|0,o.bits=1,0;for(d=1;d<c&&v[d]===0;d++);for(_<d&&(_=d),y=1,l=1;l<=Ot;l++)if(y<<=1,y-=v[l],y<0)return-1;if(y>0&&(t===tn||c!==1))return-1;for(A[1]=0,l=1;l<Ot;l++)A[l+1]=A[l]+v[l];for(f=0;f<n;f++)i[e+f]!==0&&(s[A[i[e+f]]++]=f);if(t===tn?(T=et=s,x=20):t===We?(T=Co,et=Bo,x=257):(T=Fo,et=Uo,x=0),g=0,f=0,l=d,b=r,p=_,m=0,S=-1,E=1<<_,M=E-1,t===We&&E>Ji||t===en&&E>Qi)return 1;for(;;){Be=l-m,s[f]+1<x?(Rt=0,pe=s[f]):s[f]>=x?(Rt=et[s[f]-x],pe=T[s[f]-x]):(Rt=96,pe=0),w=1<<l-m,u=1<<p,d=u;do u-=w,a[b+(g>>m)+u]=Be<<24|Rt<<16|pe|0;while(u!==0);for(w=1<<l-1;g&w;)w>>=1;if(w!==0?(g&=w-1,g+=w):g=0,f++,--v[l]===0){if(l===c)break;l=i[e+s[f]]}if(l>_&&(g&M)!==S){for(m===0&&(m=_),b+=d,p=l-m,y=1<<p;p+m<c&&(y-=v[p+m],!(y<=0));)p++,y<<=1;if(E+=1<<p,t===We&&E>Ji||t===en&&E>Qi)return 1;S=g&M,a[S]=_<<24|p<<16|b-r|0}}return g!==0&&(a[b+g]=l-m<<24|64<<16|0),o.bits=_,0};var Xt=No;const zo=0,Ra=1,Ia=2,{Z_FINISH:nn,Z_BLOCK:Ho,Z_TREES:Ee,Z_OK:xt,Z_STREAM_END:Zo,Z_NEED_DICT:$o,Z_STREAM_ERROR:W,Z_DATA_ERROR:Da,Z_MEM_ERROR:Oa,Z_BUF_ERROR:Go,Z_DEFLATED:an}=Ht,Ce=16180,rn=16181,sn=16182,on=16183,ln=16184,fn=16185,hn=16186,_n=16187,cn=16188,un=16189,Ie=16190,nt=16191,Ke=16192,dn=16193,qe=16194,pn=16195,wn=16196,gn=16197,bn=16198,ve=16199,Se=16200,yn=16201,En=16202,vn=16203,Sn=16204,mn=16205,Ve=16206,xn=16207,An=16208,O=16209,Ma=16210,Pa=16211,Wo=852,Ko=592,qo=15,Vo=qo,Tn=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function jo(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const kt=t=>{if(!t)return 1;const i=t.state;return!i||i.strm!==t||i.mode<Ce||i.mode>Pa?1:0},La=t=>{if(kt(t))return W;const i=t.state;return t.total_in=t.total_out=i.total=0,t.msg="",i.wrap&&(t.adler=i.wrap&1),i.mode=Ce,i.last=0,i.havedict=0,i.flags=-1,i.dmax=32768,i.head=null,i.hold=0,i.bits=0,i.lencode=i.lendyn=new Int32Array(Wo),i.distcode=i.distdyn=new Int32Array(Ko),i.sane=1,i.back=-1,xt},Ca=t=>{if(kt(t))return W;const i=t.state;return i.wsize=0,i.whave=0,i.wnext=0,La(t)},Ba=(t,i)=>{let e;if(kt(t))return W;const n=t.state;return i<0?(e=0,i=-i):(e=(i>>4)+5,i<48&&(i&=15)),i&&(i<8||i>15)?W:(n.window!==null&&n.wbits!==i&&(n.window=null),n.wrap=e,n.wbits=i,Ca(t))},Fa=(t,i)=>{if(!t)return W;const e=new jo;t.state=e,e.strm=t,e.window=null,e.mode=Ce;const n=Ba(t,i);return n!==xt&&(t.state=null),n},Yo=t=>Fa(t,Vo);let kn=!0,je,Ye;const Xo=t=>{if(kn){je=new Int32Array(512),Ye=new Int32Array(32);let i=0;for(;i<144;)t.lens[i++]=8;for(;i<256;)t.lens[i++]=9;for(;i<280;)t.lens[i++]=7;for(;i<288;)t.lens[i++]=8;for(Xt(Ra,t.lens,0,288,je,0,t.work,{bits:9}),i=0;i<32;)t.lens[i++]=5;Xt(Ia,t.lens,0,32,Ye,0,t.work,{bits:5}),kn=!1}t.lencode=je,t.lenbits=9,t.distcode=Ye,t.distbits=5},Ua=(t,i,e,n)=>{let a;const r=t.state;return r.window===null&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),n>=r.wsize?(r.window.set(i.subarray(e-r.wsize,e),0),r.wnext=0,r.whave=r.wsize):(a=r.wsize-r.wnext,a>n&&(a=n),r.window.set(i.subarray(e-n,e-n+a),r.wnext),n-=a,n?(r.window.set(i.subarray(e-n,e),0),r.wnext=n,r.whave=r.wsize):(r.wnext+=a,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=a))),0},Jo=(t,i)=>{let e,n,a,r,s,o,h,l,f,d,c,_,p,m,y=0,E,g,w,u,S,M,b,T;const x=new Uint8Array(4);let v,A;const et=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(kt(t)||!t.output||!t.input&&t.avail_in!==0)return W;e=t.state,e.mode===nt&&(e.mode=Ke),s=t.next_out,a=t.output,h=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,l=e.hold,f=e.bits,d=o,c=h,T=xt;t:for(;;)switch(e.mode){case Ce:if(e.wrap===0){e.mode=Ke;break}for(;f<16;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}if(e.wrap&2&&l===35615){e.wbits===0&&(e.wbits=15),e.check=0,x[0]=l&255,x[1]=l>>>8&255,e.check=L(e.check,x,2,0),l=0,f=0,e.mode=rn;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((l&255)<<8)+(l>>8))%31){t.msg="incorrect header check",e.mode=O;break}if((l&15)!==an){t.msg="unknown compression method",e.mode=O;break}if(l>>>=4,f-=4,b=(l&15)+8,e.wbits===0&&(e.wbits=b),b>15||b>e.wbits){t.msg="invalid window size",e.mode=O;break}e.dmax=1<<e.wbits,e.flags=0,t.adler=e.check=1,e.mode=l&512?un:nt,l=0,f=0;break;case rn:for(;f<16;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}if(e.flags=l,(e.flags&255)!==an){t.msg="unknown compression method",e.mode=O;break}if(e.flags&57344){t.msg="unknown header flags set",e.mode=O;break}e.head&&(e.head.text=l>>8&1),e.flags&512&&e.wrap&4&&(x[0]=l&255,x[1]=l>>>8&255,e.check=L(e.check,x,2,0)),l=0,f=0,e.mode=sn;case sn:for(;f<32;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}e.head&&(e.head.time=l),e.flags&512&&e.wrap&4&&(x[0]=l&255,x[1]=l>>>8&255,x[2]=l>>>16&255,x[3]=l>>>24&255,e.check=L(e.check,x,4,0)),l=0,f=0,e.mode=on;case on:for(;f<16;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}e.head&&(e.head.xflags=l&255,e.head.os=l>>8),e.flags&512&&e.wrap&4&&(x[0]=l&255,x[1]=l>>>8&255,e.check=L(e.check,x,2,0)),l=0,f=0,e.mode=ln;case ln:if(e.flags&1024){for(;f<16;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}e.length=l,e.head&&(e.head.extra_len=l),e.flags&512&&e.wrap&4&&(x[0]=l&255,x[1]=l>>>8&255,e.check=L(e.check,x,2,0)),l=0,f=0}else e.head&&(e.head.extra=null);e.mode=fn;case fn:if(e.flags&1024&&(_=e.length,_>o&&(_=o),_&&(e.head&&(b=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(n.subarray(r,r+_),b)),e.flags&512&&e.wrap&4&&(e.check=L(e.check,n,_,r)),o-=_,r+=_,e.length-=_),e.length))break t;e.length=0,e.mode=hn;case hn:if(e.flags&2048){if(o===0)break t;_=0;do b=n[r+_++],e.head&&b&&e.length<65536&&(e.head.name+=String.fromCharCode(b));while(b&&_<o);if(e.flags&512&&e.wrap&4&&(e.check=L(e.check,n,_,r)),o-=_,r+=_,b)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=_n;case _n:if(e.flags&4096){if(o===0)break t;_=0;do b=n[r+_++],e.head&&b&&e.length<65536&&(e.head.comment+=String.fromCharCode(b));while(b&&_<o);if(e.flags&512&&e.wrap&4&&(e.check=L(e.check,n,_,r)),o-=_,r+=_,b)break t}else e.head&&(e.head.comment=null);e.mode=cn;case cn:if(e.flags&512){for(;f<16;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}if(e.wrap&4&&l!==(e.check&65535)){t.msg="header crc mismatch",e.mode=O;break}l=0,f=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),t.adler=e.check=0,e.mode=nt;break;case un:for(;f<32;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}t.adler=e.check=Tn(l),l=0,f=0,e.mode=Ie;case Ie:if(e.havedict===0)return t.next_out=s,t.avail_out=h,t.next_in=r,t.avail_in=o,e.hold=l,e.bits=f,$o;t.adler=e.check=1,e.mode=nt;case nt:if(i===Ho||i===Ee)break t;case Ke:if(e.last){l>>>=f&7,f-=f&7,e.mode=Ve;break}for(;f<3;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}switch(e.last=l&1,l>>>=1,f-=1,l&3){case 0:e.mode=dn;break;case 1:if(Xo(e),e.mode=ve,i===Ee){l>>>=2,f-=2;break t}break;case 2:e.mode=wn;break;case 3:t.msg="invalid block type",e.mode=O}l>>>=2,f-=2;break;case dn:for(l>>>=f&7,f-=f&7;f<32;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}if((l&65535)!==(l>>>16^65535)){t.msg="invalid stored block lengths",e.mode=O;break}if(e.length=l&65535,l=0,f=0,e.mode=qe,i===Ee)break t;case qe:e.mode=pn;case pn:if(_=e.length,_){if(_>o&&(_=o),_>h&&(_=h),_===0)break t;a.set(n.subarray(r,r+_),s),o-=_,r+=_,h-=_,s+=_,e.length-=_;break}e.mode=nt;break;case wn:for(;f<14;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}if(e.nlen=(l&31)+257,l>>>=5,f-=5,e.ndist=(l&31)+1,l>>>=5,f-=5,e.ncode=(l&15)+4,l>>>=4,f-=4,e.nlen>286||e.ndist>30){t.msg="too many length or distance symbols",e.mode=O;break}e.have=0,e.mode=gn;case gn:for(;e.have<e.ncode;){for(;f<3;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}e.lens[et[e.have++]]=l&7,l>>>=3,f-=3}for(;e.have<19;)e.lens[et[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,v={bits:e.lenbits},T=Xt(zo,e.lens,0,19,e.lencode,0,e.work,v),e.lenbits=v.bits,T){t.msg="invalid code lengths set",e.mode=O;break}e.have=0,e.mode=bn;case bn:for(;e.have<e.nlen+e.ndist;){for(;y=e.lencode[l&(1<<e.lenbits)-1],E=y>>>24,g=y>>>16&255,w=y&65535,!(E<=f);){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}if(w<16)l>>>=E,f-=E,e.lens[e.have++]=w;else{if(w===16){for(A=E+2;f<A;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}if(l>>>=E,f-=E,e.have===0){t.msg="invalid bit length repeat",e.mode=O;break}b=e.lens[e.have-1],_=3+(l&3),l>>>=2,f-=2}else if(w===17){for(A=E+3;f<A;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}l>>>=E,f-=E,b=0,_=3+(l&7),l>>>=3,f-=3}else{for(A=E+7;f<A;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}l>>>=E,f-=E,b=0,_=11+(l&127),l>>>=7,f-=7}if(e.have+_>e.nlen+e.ndist){t.msg="invalid bit length repeat",e.mode=O;break}for(;_--;)e.lens[e.have++]=b}}if(e.mode===O)break;if(e.lens[256]===0){t.msg="invalid code -- missing end-of-block",e.mode=O;break}if(e.lenbits=9,v={bits:e.lenbits},T=Xt(Ra,e.lens,0,e.nlen,e.lencode,0,e.work,v),e.lenbits=v.bits,T){t.msg="invalid literal/lengths set",e.mode=O;break}if(e.distbits=6,e.distcode=e.distdyn,v={bits:e.distbits},T=Xt(Ia,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,v),e.distbits=v.bits,T){t.msg="invalid distances set",e.mode=O;break}if(e.mode=ve,i===Ee)break t;case ve:e.mode=Se;case Se:if(o>=6&&h>=258){t.next_out=s,t.avail_out=h,t.next_in=r,t.avail_in=o,e.hold=l,e.bits=f,Lo(t,c),s=t.next_out,a=t.output,h=t.avail_out,r=t.next_in,n=t.input,o=t.avail_in,l=e.hold,f=e.bits,e.mode===nt&&(e.back=-1);break}for(e.back=0;y=e.lencode[l&(1<<e.lenbits)-1],E=y>>>24,g=y>>>16&255,w=y&65535,!(E<=f);){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}if(g&&!(g&240)){for(u=E,S=g,M=w;y=e.lencode[M+((l&(1<<u+S)-1)>>u)],E=y>>>24,g=y>>>16&255,w=y&65535,!(u+E<=f);){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}l>>>=u,f-=u,e.back+=u}if(l>>>=E,f-=E,e.back+=E,e.length=w,g===0){e.mode=mn;break}if(g&32){e.back=-1,e.mode=nt;break}if(g&64){t.msg="invalid literal/length code",e.mode=O;break}e.extra=g&15,e.mode=yn;case yn:if(e.extra){for(A=e.extra;f<A;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}e.length+=l&(1<<e.extra)-1,l>>>=e.extra,f-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=En;case En:for(;y=e.distcode[l&(1<<e.distbits)-1],E=y>>>24,g=y>>>16&255,w=y&65535,!(E<=f);){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}if(!(g&240)){for(u=E,S=g,M=w;y=e.distcode[M+((l&(1<<u+S)-1)>>u)],E=y>>>24,g=y>>>16&255,w=y&65535,!(u+E<=f);){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}l>>>=u,f-=u,e.back+=u}if(l>>>=E,f-=E,e.back+=E,g&64){t.msg="invalid distance code",e.mode=O;break}e.offset=w,e.extra=g&15,e.mode=vn;case vn:if(e.extra){for(A=e.extra;f<A;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}e.offset+=l&(1<<e.extra)-1,l>>>=e.extra,f-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){t.msg="invalid distance too far back",e.mode=O;break}e.mode=Sn;case Sn:if(h===0)break t;if(_=c-h,e.offset>_){if(_=e.offset-_,_>e.whave&&e.sane){t.msg="invalid distance too far back",e.mode=O;break}_>e.wnext?(_-=e.wnext,p=e.wsize-_):p=e.wnext-_,_>e.length&&(_=e.length),m=e.window}else m=a,p=s-e.offset,_=e.length;_>h&&(_=h),h-=_,e.length-=_;do a[s++]=m[p++];while(--_);e.length===0&&(e.mode=Se);break;case mn:if(h===0)break t;a[s++]=e.length,h--,e.mode=Se;break;case Ve:if(e.wrap){for(;f<32;){if(o===0)break t;o--,l|=n[r++]<<f,f+=8}if(c-=h,t.total_out+=c,e.total+=c,e.wrap&4&&c&&(t.adler=e.check=e.flags?L(e.check,a,c,s-c):ne(e.check,a,c,s-c)),c=h,e.wrap&4&&(e.flags?l:Tn(l))!==e.check){t.msg="incorrect data check",e.mode=O;break}l=0,f=0}e.mode=xn;case xn:if(e.wrap&&e.flags){for(;f<32;){if(o===0)break t;o--,l+=n[r++]<<f,f+=8}if(e.wrap&4&&l!==(e.total&4294967295)){t.msg="incorrect length check",e.mode=O;break}l=0,f=0}e.mode=An;case An:T=Zo;break t;case O:T=Da;break t;case Ma:return Oa;case Pa:default:return W}return t.next_out=s,t.avail_out=h,t.next_in=r,t.avail_in=o,e.hold=l,e.bits=f,(e.wsize||c!==t.avail_out&&e.mode<O&&(e.mode<Ve||i!==nn))&&Ua(t,t.output,t.next_out,c-t.avail_out),d-=t.avail_in,c-=t.avail_out,t.total_in+=d,t.total_out+=c,e.total+=c,e.wrap&4&&c&&(t.adler=e.check=e.flags?L(e.check,a,c,t.next_out-c):ne(e.check,a,c,t.next_out-c)),t.data_type=e.bits+(e.last?64:0)+(e.mode===nt?128:0)+(e.mode===ve||e.mode===qe?256:0),(d===0&&c===0||i===nn)&&T===xt&&(T=Go),T},Qo=t=>{if(kt(t))return W;let i=t.state;return i.window&&(i.window=null),t.state=null,xt},tl=(t,i)=>{if(kt(t))return W;const e=t.state;return e.wrap&2?(e.head=i,i.done=!1,xt):W},el=(t,i)=>{const e=i.length;let n,a,r;return kt(t)||(n=t.state,n.wrap!==0&&n.mode!==Ie)?W:n.mode===Ie&&(a=1,a=ne(a,i,e,0),a!==n.check)?Da:(r=Ua(t,i,e,e),r?(n.mode=Ma,Oa):(n.havedict=1,xt))};var il=Ca,nl=Ba,al=La,rl=Yo,sl=Fa,ol=Jo,ll=Qo,fl=tl,hl=el,_l="pako inflate (from Nodeca project)",st={inflateReset:il,inflateReset2:nl,inflateResetKeep:al,inflateInit:rl,inflateInit2:sl,inflate:ol,inflateEnd:ll,inflateGetHeader:fl,inflateSetDictionary:hl,inflateInfo:_l};function cl(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ul=cl;const Na=Object.prototype.toString,{Z_NO_FLUSH:dl,Z_FINISH:pl,Z_OK:se,Z_STREAM_END:Xe,Z_NEED_DICT:Je,Z_STREAM_ERROR:wl,Z_DATA_ERROR:Rn,Z_MEM_ERROR:gl}=Ht;function de(t){this.options=Le.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,i.windowBits===0&&(i.windowBits=-15)),i.windowBits>=0&&i.windowBits<16&&!(t&&t.windowBits)&&(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&(i.windowBits&15||(i.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ta,this.strm.avail_out=0;let e=st.inflateInit2(this.strm,i.windowBits);if(e!==se)throw new Error(St[e]);if(this.header=new ul,st.inflateGetHeader(this.strm,this.header),i.dictionary&&(typeof i.dictionary=="string"?i.dictionary=re.string2buf(i.dictionary):Na.call(i.dictionary)==="[object ArrayBuffer]"&&(i.dictionary=new Uint8Array(i.dictionary)),i.raw&&(e=st.inflateSetDictionary(this.strm,i.dictionary),e!==se)))throw new Error(St[e])}de.prototype.push=function(t,i){const e=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let r,s,o;if(this.ended)return!1;for(i===~~i?s=i:s=i===!0?pl:dl,Na.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(n),e.next_out=0,e.avail_out=n),r=st.inflate(e,s),r===Je&&a&&(r=st.inflateSetDictionary(e,a),r===se?r=st.inflate(e,s):r===Rn&&(r=Je));e.avail_in>0&&r===Xe&&e.state.wrap>0&&t[e.next_in]!==0;)st.inflateReset(e),r=st.inflate(e,s);switch(r){case wl:case Rn:case Je:case gl:return this.onEnd(r),this.ended=!0,!1}if(o=e.avail_out,e.next_out&&(e.avail_out===0||r===Xe))if(this.options.to==="string"){let h=re.utf8border(e.output,e.next_out),l=e.next_out-h,f=re.buf2string(e.output,h);e.next_out=l,e.avail_out=n-l,l&&e.output.set(e.output.subarray(h,h+l),0),this.onData(f)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(r===se&&o===0)){if(r===Xe)return r=st.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(e.avail_in===0)break}}return!0};de.prototype.onData=function(t){this.chunks.push(t)};de.prototype.onEnd=function(t){t===se&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Le.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Ti(t,i){const e=new de(i);if(e.push(t),e.err)throw e.msg||St[e.err];return e.result}function bl(t,i){return i=i||{},i.raw=!0,Ti(t,i)}var yl=de,El=Ti,vl=bl,Sl=Ti,ml=Ht,xl={Inflate:yl,inflate:El,inflateRaw:vl,ungzip:Sl,constants:ml};const{Deflate:Wl,deflate:Al,deflateRaw:Kl,gzip:ql}=Mo,{Inflate:Tl,inflate:Vl,inflateRaw:jl,ungzip:Yl}=xl;var kl=Al,Rl=Tl;class za{constructor(i,e=!1,n=!0){this.device=i,this.tracing=e,this.slipReaderEnabled=!1,this.leftOver=new Uint8Array(0),this.baudrate=0,this.traceLog="",this.lastTraceTime=Date.now(),this._DTR_state=!1,this.slipReaderEnabled=n}getInfo(){const i=this.device.getInfo();return i.usbVendorId&&i.usbProductId?`WebSerial VendorID 0x${i.usbVendorId.toString(16)} ProductID 0x${i.usbProductId.toString(16)}`:""}getPid(){return this.device.getInfo().usbProductId}trace(i){const a=`${`TRACE ${(Date.now()-this.lastTraceTime).toFixed(3)}`} ${i}`;console.log(a),this.traceLog+=a+`
`}async returnTrace(){try{await navigator.clipboard.writeText(this.traceLog),console.log("Text copied to clipboard!")}catch(i){console.error("Failed to copy text:",i)}}hexify(i){return Array.from(i).map(e=>e.toString(16).padStart(2,"0")).join("").padEnd(16," ")}hexConvert(i,e=!0){if(e&&i.length>16){let n="",a=i;for(;a.length>0;){const r=a.slice(0,16),s=String.fromCharCode(...r).split("").map(o=>o===" "||o>=" "&&o<="~"&&o!=="  "?o:".").join("");a=a.slice(16),n+=`
    ${this.hexify(r.slice(0,8))} ${this.hexify(r.slice(8))} | ${s}`}return n}else return this.hexify(i)}slipWriter(i){const e=[];e.push(192);for(let n=0;n<i.length;n++)i[n]===219?e.push(219,221):i[n]===192?e.push(219,220):e.push(i[n]);return e.push(192),new Uint8Array(e)}async write(i){const e=this.slipWriter(i);if(this.device.writable){const n=this.device.writable.getWriter();this.tracing&&(console.log("Write bytes"),this.trace(`Write ${e.length} bytes: ${this.hexConvert(e)}`)),await n.write(e),n.releaseLock()}}_appendBuffer(i,e){const n=new Uint8Array(i.byteLength+e.byteLength);return n.set(new Uint8Array(i),0),n.set(new Uint8Array(e),i.byteLength),n.buffer}slipReader(i){let e=0,n=0,a=0,r="init";for(;e<i.length;){if(r==="init"&&i[e]==192){n=e+1,r="valid_data",e++;continue}if(r==="valid_data"&&i[e]==192){a=e-1,r="packet_complete";break}e++}if(r!=="packet_complete")return this.leftOver=i,new Uint8Array(0);this.leftOver=i.slice(a+2);const s=new Uint8Array(a-n+1);let o=0;for(e=n;e<=a;e++,o++){if(i[e]===219&&i[e+1]===220){s[o]=192,e++;continue}if(i[e]===219&&i[e+1]===221){s[o]=219,e++;continue}s[o]=i[e]}return s.slice(0,o)}async read(i=0,e=12){let n,a=this.leftOver;if(this.leftOver=new Uint8Array(0),this.slipReaderEnabled){const r=this.slipReader(a);if(r.length>0)return r;a=this.leftOver,this.leftOver=new Uint8Array(0)}if(this.device.readable==null)return this.leftOver;this.reader=this.device.readable.getReader();try{i>0&&(n=setTimeout(()=>{this.reader&&this.reader.cancel()},i));do{const{value:r,done:s}=await this.reader.read();if(s)throw this.leftOver=a,new Error("Timeout");a=new Uint8Array(this._appendBuffer(a.buffer,r.buffer))}while(a.length<e)}finally{i>0&&clearTimeout(n),this.reader.releaseLock()}if(this.tracing&&(console.log("Read bytes"),this.trace(`Read ${a.length} bytes: ${this.hexConvert(a)}`)),this.slipReaderEnabled){const r=this.slipReader(a);return this.tracing&&(console.log("Slip reader results"),this.trace(`Read ${r.length} bytes: ${this.hexConvert(r)}`)),r}return a}async rawRead(i=0){if(this.leftOver.length!=0){const n=this.leftOver;return this.leftOver=new Uint8Array(0),n}if(!this.device.readable)return this.leftOver;this.reader=this.device.readable.getReader();let e;try{i>0&&(e=setTimeout(()=>{this.reader&&this.reader.cancel()},i));const{value:n,done:a}=await this.reader.read();return a||this.tracing&&(console.log("Raw Read bytes"),this.trace(`Read ${n.length} bytes: ${this.hexConvert(n)}`)),n}finally{i>0&&clearTimeout(e),this.reader.releaseLock()}}async setRTS(i){await this.device.setSignals({requestToSend:i}),await this.setDTR(this._DTR_state)}async setDTR(i){this._DTR_state=i,await this.device.setSignals({dataTerminalReady:i})}async connect(i=115200,e={}){await this.device.open({baudRate:i,dataBits:e==null?void 0:e.dataBits,stopBits:e==null?void 0:e.stopBits,bufferSize:e==null?void 0:e.bufferSize,parity:e==null?void 0:e.parity,flowControl:e==null?void 0:e.flowControl}),this.baudrate=i,this.leftOver=new Uint8Array(0)}async sleep(i){return new Promise(e=>setTimeout(e,i))}async waitForUnlock(i){for(;this.device.readable&&this.device.readable.locked||this.device.writable&&this.device.writable.locked;)await this.sleep(i)}async disconnect(){var i,e;!((i=this.device.readable)===null||i===void 0)&&i.locked&&await((e=this.reader)===null||e===void 0?void 0:e.cancel()),await this.waitForUnlock(400),this.reader=void 0,await this.device.close()}}function xe(t){return new Promise(i=>setTimeout(i,t))}async function Il(t){await t.setRTS(!1),await t.setDTR(!1),await xe(100),await t.setDTR(!0),await t.setRTS(!1),await xe(100),await t.setRTS(!0),await t.setDTR(!1),await t.setRTS(!0),await xe(100),await t.setRTS(!1),await t.setDTR(!1)}function Dl(t){const i=["D","R","W"],e=t.split("|");for(const n of e){const a=n[0],r=n.slice(1);if(!i.includes(a))return!1;if(a==="D"||a==="R"){if(r!=="0"&&r!=="1")return!1}else if(a==="W"){const s=parseInt(r);if(isNaN(s)||s<=0)return!1}}return!0}async function Ol(t,i){const e={D:async n=>await t.setDTR(n),R:async n=>await t.setRTS(n),W:async n=>await xe(n)};try{if(!Dl(i))return;const a=i.split("|");for(const r of a){const s=r[0],o=r.slice(1);s==="W"?await e.W(Number(o)):(s==="D"||s==="R")&&await e[s](o==="1")}}catch{throw new Error("Invalid custom reset sequence")}}function Ml(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pl=function(i){return atob(i)};const In=Ml(Pl);async function Ll(t){switch(t){case 15736195:{const{ESP32ROM:i}=await K(async()=>{const{ESP32ROM:e}=await import("./esp32-BPYaDt9v.js");return{ESP32ROM:e}},__vite__mapDeps([0,1]));return new i}case 1867591791:case 2084675695:{const{ESP32C2ROM:i}=await K(async()=>{const{ESP32C2ROM:e}=await import("./esp32c2-CVPL8n1g.js");return{ESP32C2ROM:e}},__vite__mapDeps([2,3,1]));return new i}case 1763790959:case 456216687:case 1216438383:case 1130455151:{const{ESP32C3ROM:i}=await K(async()=>{const{ESP32C3ROM:e}=await import("./esp32c3-I3vXmsVg.js");return{ESP32C3ROM:e}},__vite__mapDeps([3,1]));return new i}case 752910447:{const{ESP32C6ROM:i}=await K(async()=>{const{ESP32C6ROM:e}=await import("./esp32c6-C93uIFil.js");return{ESP32C6ROM:e}},__vite__mapDeps([4,1]));return new i}case 871374959:case 606167151:{const{ESP32C61ROM:i}=await K(async()=>{const{ESP32C61ROM:e}=await import("./esp32c61-Qo5S0GG2.js");return{ESP32C61ROM:e}},__vite__mapDeps([5,4,1]));return new i}case 285294703:case 1675706479:{const{ESP32C5ROM:i}=await K(async()=>{const{ESP32C5ROM:e}=await import("./esp32c5-CAGCiNY4.js");return{ESP32C5ROM:e}},__vite__mapDeps([6,4,1]));return new i}case 3619110528:{const{ESP32H2ROM:i}=await K(async()=>{const{ESP32H2ROM:e}=await import("./esp32h2-Cf8JbGZQ.js");return{ESP32H2ROM:e}},__vite__mapDeps([7,1]));return new i}case 9:{const{ESP32S3ROM:i}=await K(async()=>{const{ESP32S3ROM:e}=await import("./esp32s3-mu2zzjDN.js");return{ESP32S3ROM:e}},__vite__mapDeps([8,1]));return new i}case 1990:{const{ESP32S2ROM:i}=await K(async()=>{const{ESP32S2ROM:e}=await import("./esp32s2-3nCAg6Ct.js");return{ESP32S2ROM:e}},__vite__mapDeps([9,1]));return new i}case 4293968129:{const{ESP8266ROM:i}=await K(async()=>{const{ESP8266ROM:e}=await import("./esp8266-8VKmCx7J.js");return{ESP8266ROM:e}},__vite__mapDeps([10,1]));return new i}case 0:case 182303440:case 117676761:{const{ESP32P4ROM:i}=await K(async()=>{const{ESP32P4ROM:e}=await import("./esp32p4-DfBdIAkh.js");return{ESP32P4ROM:e}},__vite__mapDeps([11,0,1]));return new i}default:return null}}class Cl{constructor(i){this.ESP_RAM_BLOCK=6144,this.ESP_FLASH_BEGIN=2,this.ESP_FLASH_DATA=3,this.ESP_FLASH_END=4,this.ESP_MEM_BEGIN=5,this.ESP_MEM_END=6,this.ESP_MEM_DATA=7,this.ESP_WRITE_REG=9,this.ESP_READ_REG=10,this.ESP_SPI_ATTACH=13,this.ESP_CHANGE_BAUDRATE=15,this.ESP_FLASH_DEFL_BEGIN=16,this.ESP_FLASH_DEFL_DATA=17,this.ESP_FLASH_DEFL_END=18,this.ESP_SPI_FLASH_MD5=19,this.ESP_ERASE_FLASH=208,this.ESP_ERASE_REGION=209,this.ESP_READ_FLASH=210,this.ESP_RUN_USER_CODE=211,this.ESP_IMAGE_MAGIC=233,this.ESP_CHECKSUM_MAGIC=239,this.ROM_INVALID_RECV_MSG=5,this.ERASE_REGION_TIMEOUT_PER_MB=3e4,this.ERASE_WRITE_TIMEOUT_PER_MB=4e4,this.MD5_TIMEOUT_PER_MB=8e3,this.CHIP_ERASE_TIMEOUT=12e4,this.FLASH_READ_TIMEOUT=1e5,this.MAX_TIMEOUT=this.CHIP_ERASE_TIMEOUT*2,this.CHIP_DETECT_MAGIC_REG_ADDR=1073745920,this.DETECTED_FLASH_SIZES={18:"256KB",19:"512KB",20:"1MB",21:"2MB",22:"4MB",23:"8MB",24:"16MB"},this.DETECTED_FLASH_SIZES_NUM={18:256,19:512,20:1024,21:2048,22:4096,23:8192,24:16384},this.USB_JTAG_SERIAL_PID=4097,this.romBaudrate=115200,this.debugLogging=!1,this.syncStubDetected=!1,this.checksum=function(e){let n,a=239;for(n=0;n<e.length;n++)a^=e[n];return a},this.timeoutPerMb=function(e,n){const a=e*(n/1e6);return a<3e3?3e3:a},this.flashSizeBytes=function(e){let n=-1;return e.indexOf("KB")!==-1?n=parseInt(e.slice(0,e.indexOf("KB")))*1024:e.indexOf("MB")!==-1&&(n=parseInt(e.slice(0,e.indexOf("MB")))*1024*1024),n},this.IS_STUB=!1,this.FLASH_WRITE_SIZE=16384,this.transport=i.transport,this.baudrate=i.baudrate,i.serialOptions&&(this.serialOptions=i.serialOptions),i.romBaudrate&&(this.romBaudrate=i.romBaudrate),i.terminal&&(this.terminal=i.terminal,this.terminal.clean()),typeof i.debugLogging<"u"&&(this.debugLogging=i.debugLogging),i.port&&(this.transport=new za(i.port)),typeof i.enableTracing<"u"&&(this.transport.tracing=i.enableTracing),this.info("esptool.js"),this.info("Serial port "+this.transport.getInfo())}_sleep(i){return new Promise(e=>setTimeout(e,i))}write(i,e=!0){this.terminal?e?this.terminal.writeLine(i):this.terminal.write(i):console.log(i)}error(i,e=!0){this.write(`Error: ${i}`,e)}info(i,e=!0){this.write(i,e)}debug(i,e=!0){this.debugLogging&&this.write(`Debug: ${i}`,e)}_shortToBytearray(i){return new Uint8Array([i&255,i>>8&255])}_intToByteArray(i){return new Uint8Array([i&255,i>>8&255,i>>16&255,i>>24&255])}_byteArrayToShort(i,e){return i|e>>8}_byteArrayToInt(i,e,n,a){return i|e<<8|n<<16|a<<24}_appendBuffer(i,e){const n=new Uint8Array(i.byteLength+e.byteLength);return n.set(new Uint8Array(i),0),n.set(new Uint8Array(e),i.byteLength),n.buffer}_appendArray(i,e){const n=new Uint8Array(i.length+e.length);return n.set(i,0),n.set(e,i.length),n}ui8ToBstr(i){let e="";for(let n=0;n<i.length;n++)e+=String.fromCharCode(i[n]);return e}bstrToUi8(i){const e=new Uint8Array(i.length);for(let n=0;n<i.length;n++)e[n]=i.charCodeAt(n);return e}async flushInput(){try{await this.transport.rawRead(200)}catch(i){this.error(i.message)}}async readPacket(i=null,e=3e3){for(let n=0;n<100;n++){const a=await this.transport.read(e),r=a[0],s=a[1],o=this._byteArrayToInt(a[4],a[5],a[6],a[7]),h=a.slice(8);if(r==1){if(i==null||s==i)return[o,h];if(h[0]!=0&&h[1]==this.ROM_INVALID_RECV_MSG)throw await this.flushInput(),new F("unsupported command error")}}throw new F("invalid response")}async command(i=null,e=new Uint8Array(0),n=0,a=!0,r=3e3){if(i!=null){this.transport.tracing&&this.transport.trace(`command op:0x${i.toString(16).padStart(2,"0")} data len=${e.length} wait_response=${a?1:0} timeout=${(r/1e3).toFixed(3)} data=${this.transport.hexConvert(e)}`);const s=new Uint8Array(8+e.length);s[0]=0,s[1]=i,s[2]=this._shortToBytearray(e.length)[0],s[3]=this._shortToBytearray(e.length)[1],s[4]=this._intToByteArray(n)[0],s[5]=this._intToByteArray(n)[1],s[6]=this._intToByteArray(n)[2],s[7]=this._intToByteArray(n)[3];let o;for(o=0;o<e.length;o++)s[8+o]=e[o];await this.transport.write(s)}return a?this.readPacket(i,r):[0,new Uint8Array(0)]}async readReg(i,e=3e3){const n=this._intToByteArray(i);return(await this.command(this.ESP_READ_REG,n,void 0,void 0,e))[0]}async writeReg(i,e,n=4294967295,a=0,r=0){let s=this._appendArray(this._intToByteArray(i),this._intToByteArray(e));s=this._appendArray(s,this._intToByteArray(n)),s=this._appendArray(s,this._intToByteArray(a)),r>0&&(s=this._appendArray(s,this._intToByteArray(this.chip.UART_DATE_REG_ADDR)),s=this._appendArray(s,this._intToByteArray(0)),s=this._appendArray(s,this._intToByteArray(0)),s=this._appendArray(s,this._intToByteArray(r))),await this.checkCommand("write target memory",this.ESP_WRITE_REG,s)}async sync(){this.debug("Sync");const i=new Uint8Array(36);let e;for(i[0]=7,i[1]=7,i[2]=18,i[3]=32,e=0;e<32;e++)i[4+e]=85;try{const n=await this.command(8,i,void 0,void 0,100);return this.syncStubDetected=this.syncStubDetected&&n[0]===0,n}catch(n){throw this.debug("Sync err "+n),n}}async _connectAttempt(i="default_reset",e=!1){if(this.debug("_connect_attempt "+i+" "+e),i!=="no_reset")if(this.transport.getPid()===this.USB_JTAG_SERIAL_PID)await Il(this.transport);else{const r=e?"D0|R1|W100|W2000|D1|R0|W50|D0":"D0|R1|W100|D1|R0|W50|D0";await Ol(this.transport,r)}let n=0,a=!0;for(;a;){try{const r=await this.transport.read(1e3);n+=r.length}catch(r){if(this.debug(r.message),r instanceof Error){a=!1;break}}await this._sleep(50)}for(this.transport.slipReaderEnabled=!0,this.syncStubDetected=!0,n=7;n--;){try{const r=await this.sync();return this.debug(r[0].toString()),"success"}catch(r){r instanceof Error&&(e?this.info("_",!1):this.info(".",!1))}await this._sleep(50)}return"error"}async connect(i="default_reset",e=7,n=!1){let a,r;for(this.info("Connecting...",!1),await this.transport.connect(this.romBaudrate,this.serialOptions),a=0;a<e&&(r=await this._connectAttempt(i,!1),!(r==="success"||(r=await this._connectAttempt(i,!0),r==="success")));a++);if(r!=="success")throw new F("Failed to connect with the device");if(this.info(`
\r`,!1),!n){const s=await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR)>>>0;this.debug("Chip Magic "+s.toString(16));const o=await Ll(s);if(this.chip===null)throw new F(`Unexpected CHIP magic value ${s}. Failed to autodetect chip type.`);this.chip=o}}async detectChip(i="default_reset"){await this.connect(i),this.info("Detecting chip type... ",!1),this.chip!=null?this.info(this.chip.CHIP_NAME):this.info("unknown!")}async checkCommand(i="",e=null,n=new Uint8Array(0),a=0,r=3e3){this.debug("check_command "+i);const s=await this.command(e,n,a,void 0,r);return s[1].length>4?s[1]:s[0]}async memBegin(i,e,n,a){this.debug("mem_begin "+i+" "+e+" "+n+" "+a.toString(16));let r=this._appendArray(this._intToByteArray(i),this._intToByteArray(e));r=this._appendArray(r,this._intToByteArray(n)),r=this._appendArray(r,this._intToByteArray(a)),await this.checkCommand("enter RAM download mode",this.ESP_MEM_BEGIN,r)}async memBlock(i,e){let n=this._appendArray(this._intToByteArray(i.length),this._intToByteArray(e));n=this._appendArray(n,this._intToByteArray(0)),n=this._appendArray(n,this._intToByteArray(0)),n=this._appendArray(n,i);const a=this.checksum(i);await this.checkCommand("write to target RAM",this.ESP_MEM_DATA,n,a)}async memFinish(i){const e=i===0?1:0,n=this._appendArray(this._intToByteArray(e),this._intToByteArray(i));await this.checkCommand("leave RAM download mode",this.ESP_MEM_END,n,void 0,50)}async flashSpiAttach(i){const e=this._intToByteArray(i);await this.checkCommand("configure SPI flash pins",this.ESP_SPI_ATTACH,e)}async flashBegin(i,e){const n=Math.floor((i+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),a=this.chip.getEraseSize(e,i),r=new Date,s=r.getTime();let o=3e3;this.IS_STUB==!1&&(o=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,i)),this.debug("flash begin "+a+" "+n+" "+this.FLASH_WRITE_SIZE+" "+e+" "+i);let h=this._appendArray(this._intToByteArray(a),this._intToByteArray(n));h=this._appendArray(h,this._intToByteArray(this.FLASH_WRITE_SIZE)),h=this._appendArray(h,this._intToByteArray(e)),this.IS_STUB==!1&&(h=this._appendArray(h,this._intToByteArray(0))),await this.checkCommand("enter Flash download mode",this.ESP_FLASH_BEGIN,h,void 0,o);const l=r.getTime();return i!=0&&this.IS_STUB==!1&&this.info("Took "+(l-s)/1e3+"."+(l-s)%1e3+"s to erase flash block"),n}async flashDeflBegin(i,e,n){const a=Math.floor((e+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),r=Math.floor((i+this.FLASH_WRITE_SIZE-1)/this.FLASH_WRITE_SIZE),s=new Date,o=s.getTime();let h,l;this.IS_STUB?(h=i,l=3e3):(h=r*this.FLASH_WRITE_SIZE,l=this.timeoutPerMb(this.ERASE_REGION_TIMEOUT_PER_MB,h)),this.info("Compressed "+i+" bytes to "+e+"...");let f=this._appendArray(this._intToByteArray(h),this._intToByteArray(a));f=this._appendArray(f,this._intToByteArray(this.FLASH_WRITE_SIZE)),f=this._appendArray(f,this._intToByteArray(n)),(this.chip.CHIP_NAME==="ESP32-S2"||this.chip.CHIP_NAME==="ESP32-S3"||this.chip.CHIP_NAME==="ESP32-C3"||this.chip.CHIP_NAME==="ESP32-C2")&&this.IS_STUB===!1&&(f=this._appendArray(f,this._intToByteArray(0))),await this.checkCommand("enter compressed flash mode",this.ESP_FLASH_DEFL_BEGIN,f,void 0,l);const d=s.getTime();return i!=0&&this.IS_STUB===!1&&this.info("Took "+(d-o)/1e3+"."+(d-o)%1e3+"s to erase flash block"),a}async flashBlock(i,e,n){let a=this._appendArray(this._intToByteArray(i.length),this._intToByteArray(e));a=this._appendArray(a,this._intToByteArray(0)),a=this._appendArray(a,this._intToByteArray(0)),a=this._appendArray(a,i);const r=this.checksum(i);await this.checkCommand("write to target Flash after seq "+e,this.ESP_FLASH_DATA,a,r,n)}async flashDeflBlock(i,e,n){let a=this._appendArray(this._intToByteArray(i.length),this._intToByteArray(e));a=this._appendArray(a,this._intToByteArray(0)),a=this._appendArray(a,this._intToByteArray(0)),a=this._appendArray(a,i);const r=this.checksum(i);this.debug("flash_defl_block "+i[0].toString(16)+" "+i[1].toString(16)),await this.checkCommand("write compressed data to flash after seq "+e,this.ESP_FLASH_DEFL_DATA,a,r,n)}async flashFinish(i=!1){const e=i?0:1,n=this._intToByteArray(e);await this.checkCommand("leave Flash mode",this.ESP_FLASH_END,n)}async flashDeflFinish(i=!1){const e=i?0:1,n=this._intToByteArray(e);await this.checkCommand("leave compressed flash mode",this.ESP_FLASH_DEFL_END,n)}async runSpiflashCommand(i,e,n){const o=this.chip.SPI_REG_BASE,h=o+0,l=o+this.chip.SPI_USR_OFFS,f=o+this.chip.SPI_USR1_OFFS,d=o+this.chip.SPI_USR2_OFFS,c=o+this.chip.SPI_W0_OFFS;let _;this.chip.SPI_MOSI_DLEN_OFFS!=null?_=async(b,T)=>{const x=o+this.chip.SPI_MOSI_DLEN_OFFS,v=o+this.chip.SPI_MISO_DLEN_OFFS;b>0&&await this.writeReg(x,b-1),T>0&&await this.writeReg(v,T-1)}:_=async(b,T)=>{const x=f,v=17,A=8,et=b===0?0:b-1,Rt=(T===0?0:T-1)<<A|et<<v;await this.writeReg(x,Rt)};const p=1<<18,m=28;if(n>32)throw new F("Reading more than 32 bits back from a SPI flash operation is unsupported");if(e.length>64)throw new F("Writing more than 64 bytes of data with one SPI command is unsupported");const y=e.length*8,E=await this.readReg(l),g=await this.readReg(d);let w=-2147483648,u;n>0&&(w|=268435456),y>0&&(w|=134217728),await _(y,n),await this.writeReg(l,w);let S=7<<m|i;if(await this.writeReg(d,S),y==0)await this.writeReg(c,0);else{if(e.length%4!=0){const T=new Uint8Array(e.length%4);e=this._appendArray(e,T)}let b=c;for(u=0;u<e.length-4;u+=4)S=this._byteArrayToInt(e[u],e[u+1],e[u+2],e[u+3]),await this.writeReg(b,S),b+=4}for(await this.writeReg(h,p),u=0;u<10&&(S=await this.readReg(h)&p,S!=0);u++);if(u===10)throw new F("SPI command did not complete in time");const M=await this.readReg(c);return await this.writeReg(l,E),await this.writeReg(d,g),M}async readFlashId(){const e=new Uint8Array(0);return await this.runSpiflashCommand(159,e,24)}async eraseFlash(){this.info("Erasing flash (this may take a while)...");let i=new Date;const e=i.getTime(),n=await this.checkCommand("erase flash",this.ESP_ERASE_FLASH,void 0,void 0,this.CHIP_ERASE_TIMEOUT);i=new Date;const a=i.getTime();return this.info("Chip erase completed successfully in "+(a-e)/1e3+"s"),n}toHex(i){return Array.prototype.map.call(i,e=>("00"+e.toString(16)).slice(-2)).join("")}async flashMd5sum(i,e){const n=this.timeoutPerMb(this.MD5_TIMEOUT_PER_MB,e);let a=this._appendArray(this._intToByteArray(i),this._intToByteArray(e));a=this._appendArray(a,this._intToByteArray(0)),a=this._appendArray(a,this._intToByteArray(0));let r=await this.checkCommand("calculate md5sum",this.ESP_SPI_FLASH_MD5,a,void 0,n);return r instanceof Uint8Array&&r.length>16&&(r=r.slice(0,16)),this.toHex(r)}async readFlash(i,e,n=null){let a=this._appendArray(this._intToByteArray(i),this._intToByteArray(e));a=this._appendArray(a,this._intToByteArray(4096)),a=this._appendArray(a,this._intToByteArray(1024));const r=await this.checkCommand("read flash",this.ESP_READ_FLASH,a);if(r!=0)throw new F("Failed to read memory: "+r);let s=new Uint8Array(0);for(;s.length<e;){const o=await this.transport.read(this.FLASH_READ_TIMEOUT);if(o instanceof Uint8Array)o.length>0&&(s=this._appendArray(s,o),await this.transport.write(this._intToByteArray(s.length)),n&&n(o,s.length,e));else throw new F("Failed to read memory: "+o)}return s}async runStub(){if(this.syncStubDetected)return this.info("Stub is already running. No upload is necessary."),this.chip;this.info("Uploading stub...");let i=In(this.chip.ROM_TEXT),e=i.split("").map(function(o){return o.charCodeAt(0)});const n=new Uint8Array(e);i=In(this.chip.ROM_DATA),e=i.split("").map(function(o){return o.charCodeAt(0)});const a=new Uint8Array(e);let r=Math.floor((n.length+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK),s;for(await this.memBegin(n.length,r,this.ESP_RAM_BLOCK,this.chip.TEXT_START),s=0;s<r;s++){const o=s*this.ESP_RAM_BLOCK,h=o+this.ESP_RAM_BLOCK;await this.memBlock(n.slice(o,h),s)}for(r=Math.floor((a.length+this.ESP_RAM_BLOCK-1)/this.ESP_RAM_BLOCK),await this.memBegin(a.length,r,this.ESP_RAM_BLOCK,this.chip.DATA_START),s=0;s<r;s++){const o=s*this.ESP_RAM_BLOCK,h=o+this.ESP_RAM_BLOCK;await this.memBlock(a.slice(o,h),s)}this.info("Running stub..."),await this.memFinish(this.chip.ENTRY);for(let o=0;o<100;o++){const h=await this.transport.read(1e3,6);if(h[0]===79&&h[1]===72&&h[2]===65&&h[3]===73)return this.info("Stub running..."),this.IS_STUB=!0,this.FLASH_WRITE_SIZE=16384,this.chip}throw new F("Failed to start stub. Unexpected response")}async changeBaud(){this.info("Changing baudrate to "+this.baudrate);const i=this.IS_STUB?this.transport.baudrate:0,e=this._appendArray(this._intToByteArray(this.baudrate),this._intToByteArray(i)),n=await this.command(this.ESP_CHANGE_BAUDRATE,e);this.debug(n[0].toString()),this.info("Changed"),await this.transport.disconnect(),await this._sleep(50),await this.transport.connect(this.baudrate,this.serialOptions);try{let a=64;for(;a--;){try{await this.sync();break}catch(r){this.debug(r.message)}await this._sleep(10)}}catch(a){this.debug(a.message)}}async main(i="default_reset"){await this.detectChip(i);const e=await this.chip.getChipDescription(this);return this.info("Chip is "+e),this.info("Features: "+await this.chip.getChipFeatures(this)),this.info("Crystal is "+await this.chip.getCrystalFreq(this)+"MHz"),this.info("MAC: "+await this.chip.readMac(this)),await this.chip.readMac(this),typeof this.chip.postConnect<"u"&&await this.chip.postConnect(this),await this.runStub(),this.romBaudrate!==this.baudrate&&await this.changeBaud(),e}parseFlashSizeArg(i){if(typeof this.chip.FLASH_SIZES[i]>"u")throw new F("Flash size "+i+" is not supported by this chip type. Supported sizes: "+this.chip.FLASH_SIZES);return this.chip.FLASH_SIZES[i]}_updateImageFlashParams(i,e,n,a,r){if(this.debug("_update_image_flash_params "+n+" "+a+" "+r),i.length<8||e!=this.chip.BOOTLOADER_FLASH_OFFSET)return i;if(n==="keep"&&a==="keep"&&r==="keep")return this.info("Not changing the image"),i;const s=parseInt(i[0]);let o=parseInt(i[2]);const h=parseInt(i[3]);if(s!==this.ESP_IMAGE_MAGIC)return this.info("Warning: Image file at 0x"+e.toString(16)+" doesn't look like an image file, so not changing any flash settings."),i;a!=="keep"&&(o={qio:0,qout:1,dio:2,dout:3}[a]);let l=h&15;r!=="keep"&&(l={"40m":0,"26m":1,"20m":2,"80m":15}[r]);let f=h&240;n!=="keep"&&(f=this.parseFlashSizeArg(n));const d=o<<8|l+f;return this.info("Flash params set to "+d.toString(16)),parseInt(i[2])!==o<<8&&(i=i.substring(0,2)+(o<<8).toString()+i.substring(3)),parseInt(i[3])!==l+f&&(i=i.substring(0,3)+(l+f).toString()+i.substring(4)),i}async writeFlash(i){if(this.debug("EspLoader program"),i.flashSize!=="keep"){const a=this.flashSizeBytes(i.flashSize);for(let r=0;r<i.fileArray.length;r++)if(i.fileArray[r].data.length+i.fileArray[r].address>a)throw new F(`File ${r+1} doesn't fit in the available flash`)}this.IS_STUB===!0&&i.eraseAll===!0&&await this.eraseFlash();let e,n;for(let a=0;a<i.fileArray.length;a++){this.debug("Data Length "+i.fileArray[a].data.length),e=i.fileArray[a].data;const r=i.fileArray[a].data.length%4;if(r>0&&(e+="".substring(4-r)),n=i.fileArray[a].address,this.debug("Image Length "+e.length),e.length===0){this.debug("Warning: File is empty");continue}e=this._updateImageFlashParams(e,n,i.flashSize,i.flashMode,i.flashFreq);let s=null;i.calculateMD5Hash&&(s=i.calculateMD5Hash(e),this.debug("Image MD5 "+s));const o=e.length;let h;if(i.compress){const g=this.bstrToUi8(e);e=this.ui8ToBstr(kl(g,{level:9})),h=await this.flashDeflBegin(o,e.length,n)}else h=await this.flashBegin(o,n);let l=0,f=0;const d=e.length;i.reportProgress&&i.reportProgress(a,0,d);let c=new Date;const _=c.getTime();let p=5e3;const m=new Rl({chunkSize:1});let y=0;for(m.onData=function(g){y+=g.byteLength};e.length>0;){this.debug("Write loop "+n+" "+l+" "+h),this.info("Writing at 0x"+(n+y).toString(16)+"... ("+Math.floor(100*(l+1)/h)+"%)");const g=this.bstrToUi8(e.slice(0,this.FLASH_WRITE_SIZE));if(i.compress){const w=y;m.push(g,!1);const u=y-w;let S=3e3;this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,u)>3e3&&(S=this.timeoutPerMb(this.ERASE_WRITE_TIMEOUT_PER_MB,u)),this.IS_STUB===!1&&(p=S),await this.flashDeflBlock(g,l,p),this.IS_STUB&&(p=S)}else throw new F("Yet to handle Non Compressed writes");f+=g.length,e=e.slice(this.FLASH_WRITE_SIZE,e.length),l++,i.reportProgress&&i.reportProgress(a,f,d)}this.IS_STUB&&await this.readReg(this.CHIP_DETECT_MAGIC_REG_ADDR,p),c=new Date;const E=c.getTime()-_;if(i.compress&&this.info("Wrote "+o+" bytes ("+f+" compressed) at 0x"+n.toString(16)+" in "+E/1e3+" seconds."),s){const g=await this.flashMd5sum(n,o);if(new String(g).valueOf()!=new String(s).valueOf())throw this.info("File  md5: "+s),this.info("Flash md5: "+g),new F("MD5 of file does not match data in flash!");this.info("Hash of data verified.")}}this.info("Leaving..."),this.IS_STUB&&(await this.flashBegin(0,0),i.compress?await this.flashDeflFinish():await this.flashFinish())}async flashId(){this.debug("flash_id");const i=await this.readFlashId();this.info("Manufacturer: "+(i&255).toString(16));const e=i>>16&255;this.info("Device: "+(i>>8&255).toString(16)+e.toString(16)),this.info("Detected flash size: "+this.DETECTED_FLASH_SIZES[e])}async getFlashSize(){this.debug("flash_id");const e=await this.readFlashId()>>16&255;return this.DETECTED_FLASH_SIZES_NUM[e]}async hardReset(){await this.transport.setRTS(!0),await this._sleep(100),await this.transport.setRTS(!1)}async softReset(){if(!this.IS_STUB)await this.flashBegin(0,0),await this.flashFinish(!1);else{if(this.chip.CHIP_NAME!="ESP8266")throw new F("Soft resetting is currently only supported on ESP8266");await this.command(this.ESP_RUN_USER_CODE,void 0,void 0,!1)}}}const Dn={};var Bl=Tt("<button>Connect to ESP</button>"),Fl=Tt("<button>Disconnect</button>"),Ul=Tt("<button>Update MoBOT</button>"),Nl=Tt('<p class="error svelte-141g8f0"> </p>'),zl=Tt('<div class="info svelte-141g8f0"><h2>Chip Information:</h2> <p><strong>Chip Model:</strong> </p> <p> </p></div>'),Hl=Tt("<div><!> <!> <!> <h3>ESP Device Information</h3> <!></div>");function Zl(t,i){na(i,!1);let e,n,a,r=we(!1),s=we(null),o=we(null),h=we(null);const l=Dn.readFileSync(Dn.resolve("./path/to/your/file.bin"));async function f(){try{if(it(s,null),a=null,e=await navigator.serial.requestPort(),!e)throw new Error("Serial port not available.");const w={transport:new za(e,!0),baudrate:115200};n=new Cl(w),it(o,await n.main()),it(r,!0),it(h,(await n.chip.readMac(n)).toUpperCase())}catch(g){it(s,g.message||"Failed to connect to ESP.")}}async function d(){try{e&&await e.close(),it(r,!1),it(o,null),it(h,null)}catch{it(s,"Failed to disconnect.")}}async function c(){[].push({data:l.data,address:4096})}Ur();var _=Hl(),p=V(_);ge(p,()=>!at(r),g=>{var w=Bl();Fe("click",w,f),bt(g,w)},g=>{var w=Fl();Fe("click",w,d),bt(g,w)});var m=lt(p,2);ge(m,()=>at(r),g=>{var w=Ul();Fe("click",w,c),bt(g,w)});var y=lt(m,2);ge(y,()=>at(s),g=>{var w=Nl(),u=V(w);Oi(()=>Ue(u,at(s))),bt(g,w)});var E=lt(y,4);ge(E,()=>at(o),g=>{var w=zl(),u=lt(V(w),2),S=lt(V(u)),M=lt(u,2),b=V(M);Oi(()=>{Ue(S,` ${at(o)??""}`),Ue(b,`MAC Address: ${at(h)??""}`)}),bt(g,w)}),bt(t,_),aa()}var $l=Tt(`<main><div><a href="https://techmology-dz.com/" target="_blank" rel="noreferrer"><img class="logo techmo svelte-vmqhb5" alt="Techmology's Logo"></a> <a href="https://techmology-dz.com/produit/" target="_blank" rel="noreferrer"><img class="logo mobot svelte-vmqhb5" alt="Mobot's Logo"></a></div> <h1>MoBOT Updating Tool</h1> <div class="card"><!></div></main>`);function Gl(t){var i=$l(),e=V(i),n=V(e),a=V(n);Ui(a,"src",Hr);var r=lt(n,2),s=V(r);Ui(s,"src",zr);var o=lt(e,4),h=V(o);Zl(h,{}),bt(t,i)}Cr(Gl,{target:document.getElementById("app")});
